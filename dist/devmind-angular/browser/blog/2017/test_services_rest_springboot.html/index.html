<!DOCTYPE html><html lang="en" data-critters-container><head>
  <meta charset="utf-8">
  <title>Blog</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <style>
    body {
      min-height: 100vh;
      max-height: 100vh;
      font-family: "Helvetica", "Arial", "sans-serif";
      padding: 0;
      margin: 0;
    }

    header {
      height: 90px;
      max-height: 90px;
      box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
      background-color: white;
      display: -webkit-flex;
      display: flex;
      flex-direction: column;
      box-sizing: border-box;
      z-index: 99;
      transition-duration: 0.2s;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-property: max-height, box-shadow;
      position: fixed;
      width: 100%;
      text-align: center;
    }
    header hr {
      width:100%;
      background-color: #424242;
      border-color: #424242;
      display: block;
      border: 0;
      height: 0.5em;
      margin: 0;
    }
    .header-img {
      margin: auto;
      width: 50%;
      padding-top: 0.5em;
      height: 30px;
    }
    .header-img img {
      max-height: 30px !important;
    }
    .header-space {
      min-height: 90px;
    }


    @media screen and (min-width: 901px) {
      header {
        height: 120px;
        max-height: 120px;
      }
      .header-img {
        height: 60px;
      }
      .header-img img {
        max-height: 60px !important;
      }
      .header-space {
        min-height: 120px;
      }
      nav a {
        padding: 6px 24px;
      }
      .nav-home{
        display: block !important;
      }
    }


    nav {
      display: -webkit-flex;
      display: flex;
      margin: auto;
    }

    nav a {
      padding: 0 12px;
      line-height: 28px;
      height: 28px;
      color: #424242;
      margin: auto;
      text-decoration: none;
      text-transform: uppercase;
      font-weight: 600;
      font-size: 13px;
      border-radius: 4px;
    }
    .nav-home{
      display: none;
    }
    nav a > img {
    // height: 20px;
    }

    nav a:hover {
      background-color: #9e9e9e;
    }

    nav .active {
      background-color: rgba(0, 0, 0, 0.14);
    }

    main {
      overflow-x: hidden;
    }

    img, picture {
      max-width: 100%;
      height: auto;
      margin: auto;
    }

    * {
      box-sizing: border-box; /* pour maîtriser width et flex-basis */
    }

    .devmind-section {
      display: block;
      margin: 0 auto;
      max-width: 1600px;
      padding: 60px 40px;
    }

    @media (max-width: 700px) {
      .devmind-section {
        padding: 25px 10px;
      }
    }

    @media (min-width: 701px) and (max-width: 900px) {
      .devmind-section {
        padding: 40px 25px;
      }
    }

    .dm-social {
      min-width: 2em;
      max-width: 2em;
      width: 2em;
      height: 2em;
    }
  </style>
  <script>
    function copyToClipboard(id) {
      const text = document.getElementById(id).innerText
        .replaceAll('~$', '')
        .replaceAll('(1)', '')
        .replaceAll('(2)', '')
        .replaceAll('(3)', '')
        .replaceAll('(4)', '')
        .replaceAll('(5)', '')
        .replaceAll('(6)', '')
        .replaceAll('(7)', '')
        .replaceAll('(8)', '')
        .replaceAll('(9)', '')
        .replaceAll('(10)', '')
      ;
      navigator.clipboard.writeText(text.substring(0, text.length));
    }
  </script>
<style>code[class*=language-]{color:#555;background:none;text-shadow:0 1px white;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}.imageblock{text-align:center}h1,h2{font-weight:100}h1{font-size:35px;line-height:38px}.dm-block--blog{width:100%;background-color:#eceff1;color:#424242;padding:0;margin:0}.btn-copy-code{background-color:#fff;border:2px solid white;border-radius:24px;color:#424242!important;margin:1em .5em auto auto;font-weight:700;font-size:16px;display:block;cursor:pointer;width:auto;text-align:center;box-shadow:0 4px 5px #00000024,0 1px 10px #0000001f,0 2px 4px -1px #0003;padding:4px;font-size:small}.btn-copy-code:hover{background-color:#424242;border:2px solid #424242;color:#fff!important;padding:.5em 1em}footer{background-color:#424242}.is-small-screen{display:none}.is-large-screen{display:inherit}@media screen and (max-width: 900px){.is-small-screen{display:inherit}.is-large-screen{display:none}}h1,h2{color:#424242;font-weight:100}h1{font-weight:bolder;font-size:35px;line-height:38px}h2{font-size:25px;line-height:28px}@media (max-width: 700px){h1{font-size:28px;line-height:30px}h2{font-size:22px;line-height:24px}}
</style><link rel="stylesheet" href="styles-2TVDB7GC.css" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-2TVDB7GC.css"></noscript><style ng-app-id="ng">.dm_footer[_ngcontent-ng-c2660501952]{color:#eee;display:flex;justify-content:space-between;font-size:14px}.dm_footer[_ngcontent-ng-c2660501952]   .dm_society[_ngcontent-ng-c2660501952]{color:#fff}.dm_footer[_ngcontent-ng-c2660501952]   div[_ngcontent-ng-c2660501952]{margin-right:1em;width:100%}.dm_footer[_ngcontent-ng-c2660501952]   .dm_footer__middle[_ngcontent-ng-c2660501952]{flex-grow:1}.dm_footer[_ngcontent-ng-c2660501952]   .dm_footer__right[_ngcontent-ng-c2660501952]{text-align:right}.dm_footer[_ngcontent-ng-c2660501952]   .is-large-screen[_ngcontent-ng-c2660501952]{padding:.7em;margin:.7em 1em}.dm_footer[_ngcontent-ng-c2660501952]   .is-small-screen[_ngcontent-ng-c2660501952]{padding:0;margin:0 1em;font-size:12px}</style><style ng-app-id="ng">h1{margin-top:.5em}.dm-blog--info-date{font-size:smaller;color:#424242;border:1px solid #aaa;border-radius:24px;padding:.5em 1em;margin-right:.5em;display:inline}.blog-keywords{display:flex;margin-bottom:1em}.blog-keywords .dm-blog--keyword-detail{background-color:#ccc;color:#424242;padding:.5em 1em;margin-right:.5em;border-radius:24px;font-size:smaller}.toc{background-color:#ccc;margin-top:1em;border:1px solid #ccc;padding:1em;border-radius:8px}.toc #toctitle{font-weight:700;margin-bottom:.5em}img{max-width:100%;height:auto}.imageblock>.content{display:flex;justify-content:center;align-items:center}.highlight{display:block;overflow-x:auto;background:#f3f3f3;color:#444;padding:1.5em;box-shadow:0 8px 16px #00000026;border-radius:8px}code.hljs{padding:3px 5px}.hljs-comment{color:#697070}.hljs-punctuation,.hljs-tag{color:#444a}.hljs-tag .hljs-attr,.hljs-tag .hljs-name{color:#444}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-name,.hljs-selector-tag{font-weight:700}.hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#800}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-link,.hljs-operator,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#ab5656}.hljs-literal{color:#695}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code{color:#397300}.hljs-meta{color:#1f7199}.hljs-meta .hljs-string{color:#38a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.language-kotlin:before{display:block;float:right;content:"kotlin";font-weight:700;text-transform:uppercase}.language-typescript:before{display:block;float:right;content:"typescript";font-weight:700;text-transform:uppercase}.language-java:before{display:block;float:right;content:"java";font-weight:700;text-transform:uppercase}.language-javascript:before{display:block;float:right;content:"javascript";font-weight:700;text-transform:uppercase}.language-shell:before{display:block;float:right;content:"shell";font-weight:700;text-transform:uppercase}.language-yaml:before{display:block;float:right;content:"yaml";font-weight:700;text-transform:uppercase}.language-json:before{display:block;float:right;content:"json";font-weight:700;text-transform:uppercase}.language-xml:before{display:block;float:right;content:"xml";font-weight:700;text-transform:uppercase}.language-html:before{display:block;float:right;content:"html";font-weight:700;text-transform:uppercase}.language-css:before{display:block;float:right;content:"css";font-weight:700;text-transform:uppercase}.language-scss:before{display:block;float:right;content:"scss";font-weight:700;text-transform:uppercase}
</style></head>
<body><!--nghm-->
  <app-root _nghost-ng-c582792440 ng-version="18.0.0" ngh="2" ng-server-context="ssg"><app-header _ngcontent-ng-c582792440 _nghost-ng-c2882497807 ngh="0"><header _ngcontent-ng-c2882497807><div _ngcontent-ng-c2882497807 class="header-img"><a _ngcontent-ng-c2882497807 routerlink="/" aria-label="Accueil" href="/"><img _ngcontent-ng-c2882497807 src="img/logo/logo_long.svg" alt="Dev-Mind" title="Dev-Mind"></a></div><nav _ngcontent-ng-c2882497807><a _ngcontent-ng-c2882497807 routerlink="/" aria-label="Accueil" class="nav-home" href="/"><img _ngcontent-ng-c2882497807 src="/img/ic_home_white_24px.svg" rel="start" alt="Accueil"></a><a _ngcontent-ng-c2882497807 routerlink="/formations.html" aria-label="Formations" class href="/formations.html"> Formations</a><a _ngcontent-ng-c2882497807 routerlink="/blog.html" aria-label="Blog" class="active" href="/blog.html">Blog</a><a _ngcontent-ng-c2882497807 routerlink="/experience.html" aria-label="Experience" class href="/experience.html"> Expérience</a></nav><hr _ngcontent-ng-c2882497807></header><div _ngcontent-ng-c2882497807 class="header-space"></div></app-header><router-outlet _ngcontent-ng-c582792440></router-outlet><app-asciidoc-viewer ngh="1"><div class="dm-block--blog"><div class="devmind-section"><h1><!--ngetn--></h1><div class="blog-keywords"><div class="dm-blog--info-date">15/03/2017</div><div class="dm-blog--keyword-detail">Java</div><div class="dm-blog--keyword-detail">Spring</div><div class="dm-blog--keyword-detail">SpringBoot</div><!---->&nbsp; </div><div class="preview"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Je voulais faire un focus dans cet article sur les possibilités offertes par SpringBoot (version 1.4.x) pour écrire des tests simples, lisibles et rapides de vos services REST. Niveau performance, le chargement du contexte est encore un peu long mais ceci devrait être encore amélioré dans les futures versions.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/blog/2017/test_services-rest-springboot_01.png" alt="Test avec SpringBoot">
</div>
</div>
<div class="paragraph">
<p>Prenons un exemple de controller REST.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447061960.223"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/session")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SessionService sessionService;

    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> List<span class="hljs-meta">&lt;Session</span><span class="hljs-meta">&gt;</span> findAll() {
        <span class="hljs-keyword">return</span> sessionService.findAll();
    }

    <span class="hljs-meta">@GetMapping(("/{id}"))</span>
    <span class="hljs-keyword">public</span> ResponseEntity<span class="hljs-meta">&lt;Session</span><span class="hljs-meta">&gt;</span> findOne(<span class="hljs-meta">@PathVariable("id")</span> String id) {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionService.findOne(id);

        <span class="hljs-keyword">if</span> (session == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> notFound().build();
        }
        <span class="hljs-keyword">return</span> ok(session);
    }


    <span class="hljs-meta">@PostMapping</span>
        <span class="hljs-keyword">public</span> ResponseEntity<span class="hljs-meta">&lt;Session</span><span class="hljs-meta">&gt;</span> save(<span class="hljs-meta">@Valid</span> <span class="hljs-meta">@RequestBody</span> Session session) {
        <span class="hljs-keyword">return</span> ok(sessionService.save(session));
    }
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447061960.223')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Vous pouvez noter qu’au lieu d’utiliser des annotations <code><em>@RequestMapping</em></code> sur toutes vos méthodes vous pouvez maintenant utilisez les annotations propres à chacun des verbes HTTP : <code><em>@GetMapping</em></code>, <code><em>@PostMapping</em></code> …​</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_valider_la_validité_des_arguments">Valider la validité des arguments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On veut souvent automatiser les contrôles de premier niveau des objets que nous envoyons à nos services REST. Pour celà vous pouvez utiliser la norme Bean Validation. Pour rappel vous avez besoin de rajouter 2 dépendances (une vers l’API, une vers une implémentation de cette dernière)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447061960.4702">compile <span class="hljs-string">"javax.validation:validation-api:1.1.0.Final"</span>
compile <span class="hljs-string">"org.hibernate:hibernate-validator:1.1.0.Final"</span></code><button class="btn-copy-code" onclick="copyToClipboard('1731447061960.4702')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Concrètement vous pouvez ensuite utiliser l’annotation <code><em>@Valid</em></code> devant les paramètres de votre service (voir la méthode save) et annoter votre DTO.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447061961.7417"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Session</span> {
    <span class="hljs-keyword">private</span> String id;
    <span class="hljs-meta">@NotEmpty</span>
    <span class="hljs-keyword">private</span> String title;
    <span class="hljs-meta">@NotNull</span>
    <span class="hljs-meta">@Min(1)</span>
    <span class="hljs-meta">@Max(500)</span>
    <span class="hljs-keyword">private</span> Integer maxAttendees;
    <span class="hljs-comment">// ...</span>
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447061961.7417')">Copy</button></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ecrire_un_test">Ecrire un test</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Oups…​Je voulais faire un article sur les tests et je n’en ai encore pas parlé… allez c’est parti nous allons créer une classe de test</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447061962.077"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@WebMvcTest(SessionController.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionControllerTest</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> MockMvc mvc;

    <span class="hljs-meta">@MockBean</span>
    <span class="hljs-keyword">private</span> SessionService sessionService;

    <span class="hljs-keyword">private</span> <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();

}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447061962.077')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Vous pouvez noter que vous pouvez maintenant utiliser l’annotation <code><em>@WebMvcTest(SessionController.class)</em></code> pour ne tester qu’un seul controller sans à avoir à charger toute l’application Spring Boot et donc gagner en rapidité d’exécution.</p>
</div>
<div class="paragraph">
<p>L’objet MockMvc du projet spring-test va nous permettre d’invoquer notre API Rest tout en moquant les collaborateurs. Les mocks vont être créés par spring-boot-test qui apporte une encapsulation de Mockito (annotation <code><em>@MockBean</em></code>).</p>
</div>
<div class="paragraph">
<p>Le dernier élément est le mapper qui va permettre de convertir nos données en JSON lorsque nous voulons invoquer notre API comme le ferait par exemple un client JavaScript.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_un_premier_exemple_de_test_méthode_get">Un premier exemple de test méthode GET</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447061964.773"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shouldFindAllSessions</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {

    given(<span class="hljs-built_in">this</span>.sessionService.findAll())
            .willReturn(asList(
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Session</span>().withId(<span class="hljs-string">"1"</span>).withTitle(<span class="hljs-string">"title1"</span>),
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Session</span>().withId(<span class="hljs-string">"2"</span>).withTitle(<span class="hljs-string">"title2"</span>)));

    <span class="hljs-built_in">this</span>.mvc.perform(get(<span class="hljs-string">"/api/session"</span>))
            .andExpect(status().isOk())
            .andExpect(jsonPath(<span class="hljs-string">"$.length()"</span>, is(<span class="hljs-number">2</span>)))
            .andExpect(jsonPath(<span class="hljs-string">"$.[0].title"</span>, is(<span class="hljs-string">"title1"</span>)));
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447061964.773')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ce test nous commençons par définir le comportement de notre collaborateur (sessionService) via Mockito (j’utilise la syntaxe BDD qui est poussée par l’équipe de Mockito).</p>
</div>
<div class="paragraph">
<p>La fluent API de mockMVC et les différents builders permettent d’écrire des tests concis et clairs. En gros ici j’appelle via un GET l’URL <code><em>/api/session</em></code> et j’attends en retour un code statut à 200 (<code><em>status().isOk()</em></code>)</p>
</div>
<div class="paragraph">
<p>Vous pouvez utiliser différents matchers pour vérifier le contenu de la réponse. Ici j’utilise JsonPath qui me permet de parser le résultat de l’appel.</p>
</div>
<div class="paragraph">
<p>Une petite astuce si vous utilisez SpringSecurity. Vous pouvez utiliser un <code><em>RequestPostProcessor</em></code> mis à disposition dans le projet <code><em>spring-security-test</em></code>. Mon appel devient</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447061964.8503"><span class="hljs-built_in">this</span>.mvc.perform(get(<span class="hljs-string">"/api/session"</span>).with(httpBasic(<span class="hljs-string">"admin"</span>, <span class="hljs-string">"password"</span>)))
            .andExpect(status().isOk())
            .andExpect(jsonPath(<span class="hljs-string">"$.length()"</span>, is(<span class="hljs-number">2</span>)))
            .andExpect(jsonPath(<span class="hljs-string">"$.[0].title"</span>, is(<span class="hljs-string">"title1"</span>)));</code><button class="btn-copy-code" onclick="copyToClipboard('1731447061964.8503')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Vous pouvez aussi choisir de désactiver la sécurité en utilisant la propriété secure de l’annotation <code><em>@WebMvcTest</em></code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447061965.7163"><span class="hljs-meta">@WebMvcTest(value = SessionController.class, secure = false)</span></code><button class="btn-copy-code" onclick="copyToClipboard('1731447061965.7163')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Nous avons vu comment tester un GET. Tester une méthode POST n’est pas très différent.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exemple_de_test_méthode_post">Exemple de test méthode POST</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447061966.732"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shouldCreateSession</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {

    <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Session</span>().withTitle(<span class="hljs-string">"My Spring session"</span>).withMaxAttendees(<span class="hljs-number">10</span>);

    given(<span class="hljs-built_in">this</span>.sessionService.save(any(Session.class)))
           .willReturn(session.withId(<span class="hljs-string">"id"</span>));

    <span class="hljs-built_in">this</span>.mvc.perform(
            post(<span class="hljs-string">"/api/session"</span>)
                    .contentType(MediaType.APPLICATION_JSON)
                    .content(mapper.writeValueAsString(session))
    )
            .andExpect(status().isOk())
            .andExpect(jsonPath(<span class="hljs-string">"$.id"</span>, is(<span class="hljs-string">"id"</span>)))
            .andExpect(jsonPath(<span class="hljs-string">"$.title"</span>, is(<span class="hljs-string">"My Spring session"</span>)));
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447061966.732')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Quand vous envoyez vos données via un POST à un service REST vous devez spécifier le content type et sérialiser vos données en JSON sous forme d’une chaine de caractère.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exemple_de_test_avec_validation">Exemple de test avec validation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Regardons maintenant ce qu’il se passe si les données ne correspondent pas aux contraintes spécifiées par Bean Validation (voir plus haut). Si tout va bien une erreur 400 est retournée</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447061967.2769"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shouldNotCreateSessionWhenBeanInvalid</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {

    <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Session</span>();

    <span class="hljs-built_in">this</span>.mvc.perform(
            post(<span class="hljs-string">"/api/session"</span>)
                    .contentType(MediaType.APPLICATION_JSON)
                    .content(mapper.writeValueAsString(session))
                    .with(httpBasic(<span class="hljs-string">"admin"</span>, <span class="hljs-string">"password"</span>))
    )
            .andExpect(status().isBadRequest());
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447061967.2769')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Voila j’espère vous avoir montré par cet exemple que les tests de vos services REST peuvent être simples à écrire.</p>
</div>
</div>
</div></div></div></div></app-asciidoc-viewer><!----><app-footer _ngcontent-ng-c582792440 _nghost-ng-c2660501952 ngh="0"><footer _ngcontent-ng-c2660501952><div _ngcontent-ng-c2660501952 class="dm_footer"><div _ngcontent-ng-c2660501952 class="is-small-screen"><p _ngcontent-ng-c2660501952 id="footer-dm_society"> SARL au capital de <i _ngcontent-ng-c2660501952>5000€</i><br _ngcontent-ng-c2660501952> SIREN : 808 720 759, au RCS de Saint-Etienne<br _ngcontent-ng-c2660501952> All right reserved - ©2024 Guillaume EHRET </p></div><div _ngcontent-ng-c2660501952 class="is-large-screen"><div _ngcontent-ng-c2660501952 class="dm_footer__middle"><div _ngcontent-ng-c2660501952 class="dm_society"> Dev-Mind </div><div _ngcontent-ng-c2660501952>SARL au capital de <i _ngcontent-ng-c2660501952>5000€</i></div><div _ngcontent-ng-c2660501952>SIREN : 808 720 759, au RCS de Saint-Etienne</div><div _ngcontent-ng-c2660501952><small _ngcontent-ng-c2660501952>Mise à jour le 12/11/2024</small></div></div><div _ngcontent-ng-c2660501952 class="dm_footer__right"> All right reserved - ©2024 Guillaume EHRET </div></div></div></footer></app-footer></app-root>

<script src="polyfills-A7MJM4D4.js" type="module"></script><script src="main-7HWWU66L.js" type="module"></script>

<script id="ng-state" type="application/json">{"__nghData__":[{},{"t":{"7":"t2"},"c":{"7":[{"i":"t2","r":1,"x":3}]}},{"c":{"1":[{"i":"c490234363","r":1}]}}]}</script></body></html>