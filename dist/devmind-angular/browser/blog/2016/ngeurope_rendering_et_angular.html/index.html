<!DOCTYPE html><html lang="en" data-critters-container><head>
  <meta charset="utf-8">
  <title>Blog</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <style>
    body {
      min-height: 100vh;
      max-height: 100vh;
      font-family: "Helvetica", "Arial", "sans-serif";
      padding: 0;
      margin: 0;
    }

    header {
      height: 90px;
      max-height: 90px;
      box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
      background-color: white;
      display: -webkit-flex;
      display: flex;
      flex-direction: column;
      box-sizing: border-box;
      z-index: 99;
      transition-duration: 0.2s;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-property: max-height, box-shadow;
      position: fixed;
      width: 100%;
      text-align: center;
    }
    header hr {
      width:100%;
      background-color: #424242;
      border-color: #424242;
      display: block;
      border: 0;
      height: 0.5em;
      margin: 0;
    }
    .header-img {
      margin: auto;
      width: 50%;
      padding-top: 0.5em;
      height: 30px;
    }
    .header-img img {
      max-height: 30px !important;
    }
    .header-space {
      min-height: 90px;
    }


    @media screen and (min-width: 901px) {
      header {
        height: 120px;
        max-height: 120px;
      }
      .header-img {
        height: 60px;
      }
      .header-img img {
        max-height: 60px !important;
      }
      .header-space {
        min-height: 120px;
      }
      nav a {
        padding: 6px 24px;
      }
      .nav-home{
        display: block !important;
      }
    }


    nav {
      display: -webkit-flex;
      display: flex;
      margin: auto;
    }

    nav a {
      padding: 0 12px;
      line-height: 28px;
      height: 28px;
      color: #424242;
      margin: auto;
      text-decoration: none;
      text-transform: uppercase;
      font-weight: 600;
      font-size: 13px;
      border-radius: 4px;
    }
    .nav-home{
      display: none;
    }
    nav a > img {
    // height: 20px;
    }

    nav a:hover {
      background-color: #9e9e9e;
    }

    nav .active {
      background-color: rgba(0, 0, 0, 0.14);
    }

    main {
      overflow-x: hidden;
    }

    img, picture {
      max-width: 100%;
      height: auto;
      margin: auto;
    }

    * {
      box-sizing: border-box; /* pour maîtriser width et flex-basis */
    }

    .devmind-section {
      display: block;
      margin: 0 auto;
      max-width: 1600px;
      padding: 60px 40px;
    }

    @media (max-width: 700px) {
      .devmind-section {
        padding: 25px 10px;
      }
    }

    @media (min-width: 701px) and (max-width: 900px) {
      .devmind-section {
        padding: 40px 25px;
      }
    }

    .dm-social {
      min-width: 2em;
      max-width: 2em;
      width: 2em;
      height: 2em;
    }
  </style>
<style>.dm-block--blog{width:100%;background-color:#eceff1;color:#424242;padding:0;margin:0}.dm-block--blog a,.dm-block--blog a:hover,.dm-block--blog a:visited{font-weight:700;color:#424242;text-decoration:none}footer{background-color:#424242}.is-small-screen{display:none}.is-large-screen{display:inherit}@media screen and (max-width: 900px){.is-small-screen{display:inherit}.is-large-screen{display:none}}h1,h2{color:#424242;font-weight:100}h1{font-weight:bolder;font-size:35px;line-height:38px}h2{font-size:25px;line-height:28px}@media (max-width: 700px){h1{font-size:28px;line-height:30px}h2{font-size:22px;line-height:24px}}
</style><link rel="stylesheet" href="styles-WO7TV6DC.css" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-WO7TV6DC.css"></noscript><style ng-app-id="ng">.dm_footer[_ngcontent-ng-c2660501952]{color:#eee;display:flex;justify-content:space-between;font-size:14px}.dm_footer[_ngcontent-ng-c2660501952]   .dm_society[_ngcontent-ng-c2660501952]{color:#fff}.dm_footer[_ngcontent-ng-c2660501952]   div[_ngcontent-ng-c2660501952]{margin-right:1em;width:100%}.dm_footer[_ngcontent-ng-c2660501952]   .dm_footer__middle[_ngcontent-ng-c2660501952]{flex-grow:1}.dm_footer[_ngcontent-ng-c2660501952]   .dm_footer__right[_ngcontent-ng-c2660501952]{text-align:right}.dm_footer[_ngcontent-ng-c2660501952]   .is-large-screen[_ngcontent-ng-c2660501952]{padding:.7em;margin:.7em 1em}.dm_footer[_ngcontent-ng-c2660501952]   .is-small-screen[_ngcontent-ng-c2660501952]{padding:0;margin:0 1em;font-size:12px}</style><style ng-app-id="ng">h1{margin-top:.5em}.dm-blog--info-date{font-size:smaller;color:#424242;border:1px solid #aaa;border-radius:24px;padding:.5em 1em;margin-right:.5em;display:inline}.blog-keywords{display:flex;margin-bottom:1em}.blog-keywords .dm-blog--keyword-detail{background-color:#ccc;color:#424242;padding:.5em 1em;margin-right:.5em;border-radius:24px;font-size:smaller}.toc{background-color:#ccc;margin-top:1em;border:1px solid #ccc;padding:1em;border-radius:8px}.toc #toctitle{font-weight:700;margin-bottom:.5em}img{max-width:100%;height:auto}.imageblock>.content{display:flex;justify-content:center;align-items:center}.highlight{display:block;overflow-x:auto;background:#f3f3f3;color:#444;padding:1.5em;box-shadow:0 8px 16px #00000026;border-radius:8px}code.hljs{padding:3px 5px}.hljs-comment{color:#697070}.hljs-punctuation,.hljs-tag{color:#444a}.hljs-tag .hljs-attr,.hljs-tag .hljs-name{color:#444}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-name,.hljs-selector-tag{font-weight:700}.hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#800}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-link,.hljs-operator,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#ab5656}.hljs-literal{color:#695}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code{color:#397300}.hljs-meta{color:#1f7199}.hljs-meta .hljs-string{color:#38a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.language-kotlin:before{display:block;float:right;content:"kotlin";font-weight:700;text-transform:uppercase}.language-typescript:before{display:block;float:right;content:"typescript";font-weight:700;text-transform:uppercase}.language-java:before{display:block;float:right;content:"java";font-weight:700;text-transform:uppercase}.language-javascript:before{display:block;float:right;content:"javascript";font-weight:700;text-transform:uppercase}.language-shell:before{display:block;float:right;content:"shell";font-weight:700;text-transform:uppercase}.language-yaml:before{display:block;float:right;content:"yaml";font-weight:700;text-transform:uppercase}.language-json:before{display:block;float:right;content:"json";font-weight:700;text-transform:uppercase}.language-xml:before{display:block;float:right;content:"xml";font-weight:700;text-transform:uppercase}.language-html:before{display:block;float:right;content:"html";font-weight:700;text-transform:uppercase}.language-css:before{display:block;float:right;content:"css";font-weight:700;text-transform:uppercase}.language-scss:before{display:block;float:right;content:"scss";font-weight:700;text-transform:uppercase}
</style></head>
<body><!--nghm-->
  <app-root _nghost-ng-c582792440 ng-version="18.0.0" ngh="2" ng-server-context="ssg"><app-header _ngcontent-ng-c582792440 _nghost-ng-c2882497807 ngh="0"><header _ngcontent-ng-c2882497807><div _ngcontent-ng-c2882497807 class="header-img"><a _ngcontent-ng-c2882497807 routerlink="/" aria-label="Accueil" href="/"><img _ngcontent-ng-c2882497807 src="img/logo/logo_long.svg" alt="Dev-Mind" title="Dev-Mind"></a></div><nav _ngcontent-ng-c2882497807><a _ngcontent-ng-c2882497807 routerlink="/" aria-label="Accueil" class="nav-home" href="/"><img _ngcontent-ng-c2882497807 src="/img/ic_home_white_24px.svg" rel="start" alt="Accueil"></a><a _ngcontent-ng-c2882497807 routerlink="/formations.html" aria-label="Formations" class href="/formations.html"> Formations</a><a _ngcontent-ng-c2882497807 routerlink="/blog.html" aria-label="Blog" class="active" href="/blog.html">Blog</a><a _ngcontent-ng-c2882497807 routerlink="/experience.html" aria-label="Experience" class href="/experience.html"> Expérience</a></nav><hr _ngcontent-ng-c2882497807></header><div _ngcontent-ng-c2882497807 class="header-space"></div></app-header><router-outlet _ngcontent-ng-c582792440></router-outlet><app-asciidoc-viewer ngh="1"><div class="dm-block--blog"><div class="devmind-section"><h1><!--ngetn--></h1><div class="blog-keywords"><div class="dm-blog--info-date">24/10/2016</div><div class="dm-blog--keyword-detail">Angular</div><div class="dm-blog--keyword-detail">Angular2</div><div class="dm-blog--keyword-detail">ng-europe</div><div class="dm-blog--keyword-detail">Universal</div><!---->&nbsp; </div><div class="preview"><div class="sect1">
<h2 id="_marc_laval_custom_renderers_in_angular_2_slides"><a href="https://twitter.com/marclaval">Marc Laval</a> Custom renderers in Angular 2 : <a href="https://docs.google.com/presentation/d/1Ay8TXGblvW0Y9rXXresTPdOeYwOJIts0XJzEOiKXuhE/edit#slide=id.p">slides</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Angular 2 a revu toute la partie rendering pour deux raisons</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/blog/2016/ngeurope/ngeurope-rendering01.jpg" alt="Marc Laval">
</div>
<div class="title">Figure 1. photo de Philippe Chatel</div>
</div>
<div class="paragraph">
<p>Une application JavaScript s’exécute sur un seul thread. Pour éviter de ralentir ce thread principal qui cumule exécution des scripts et rendu de votre page, les web workers permettent d’exécuter du code en parallèle dans d’autres thread.</p>
</div>
<div class="paragraph">
<p>Comme nous faisons de plus en plus de traitement dans nos applications JavaScript vous pouvez avoir de gros ralentissements. Les appels distants en asynchrones on permis de résoudre ce problème il y a quelques années mais ces derniers se multiplient et quand les résultats arrivent et sont traités nous retombons dans les mêmes problèmes. L’avènement des framework est aussi problématique car toute la logique pour charger des ressources, les compiler, faire du routage accentue le nombre de traitements.</p>
</div>
<div class="paragraph">
<p>Avec les Web Workers le thread principal peut être réservé au rendering. Pour limiter les problèmes les web workers ont un accès limité aux API du navigateur. Ils ne peuvent par exemple pas interagir avec le DOM. Les échanges entre thread se font par messages</p>
</div>
<div class="paragraph">
<p>Exemple d’un worker initialisé dans le thread principal</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript"><span class="hljs-keyword">var</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'doWork.js'</span>);
worker.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Worker said: '</span>, e.<span class="hljs-property">data</span>);
}, <span class="hljs-literal">false</span>);
worker.<span class="hljs-title function_">postMessage</span>(<span class="hljs-string">'Hello World'</span>); <span class="hljs-comment">// Send data to our worker.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici à quoi ressemble un web worker. Dans notre exemple on s’abonne à l’événement message et dans notre cas on renvoie le même message au thread principal</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  self.<span class="hljs-title function_">postMessage</span>(e.<span class="hljs-property">data</span>);
}, <span class="hljs-literal">false</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Angular 2 se lance dans un web worker pour améliorer les performances. Nous allons avoir de grandes disparités dans les temps d’exécution entre les navigateurs dits “modernes” et les “anciens” qui trainent à implémenter les dernières normes du W3C.</p>
</div>
<div class="paragraph">
<p>Revenons à notre sujet sur le rendering. La refonte permet d’isoler les problématiques de rendering. Ainsi nous aurons le cheminement suivant</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/blog/2016/ngeurope/ngeurope-rendering02.png" alt="Rendering Angular 2">
</div>
</div>
<div class="paragraph">
<p>L’autre intérêt d’avoir dissocier le rendering du reste est que vous avez maintenant plusieurs solutions en sortie. Par défaut l’application est rendue sur un navigateur Internet mais avec Angular 2 vous pouvez avoir un rendering sous forme d’application mobile (react-native ou NativeScript).</p>
</div>
<div class="paragraph">
<p>Marc montre dans sa conférence comment écrire son propre render pour par exemple générer des fichiers markdown à partir d’une application angular. Le résultat est peut être peu utile mais l’exercice est intéressant pour montrer les possibilités de rendering dans Angular.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wassim_chegham_getting_universal_with_angular_2_slides"><a href="https://twitter.com/manekinekko">Wassim Chegham</a> Getting Universal with Angular 2 <a href="http://slides.com/wassimchegham/angular2-universal#/">slides</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Avec Angular 2 le rendering peut également se faire côté serveur. Nous pouvons nous interroger de l’intérêt.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/blog/2016/ngeurope/ngeurope-rendering03.jpg" alt="Wassim Chegham">
</div>
<div class="title">Figure 2. photo de Philippe Chatel</div>
</div>
<div class="paragraph">
<p>Le premier est le Search Engine Optimization (SEO). Pour rappel les robots des différents moteurs de recherche parsent régulièrement les sites web pour indexer les différentes pages d’un site. Les robots ne comprennent pour la plupart que le HTML. Ils sont capables ensuite de parser les pages et de suivre les liens pour indexer plus en profondeur un site web.</p>
</div>
<div class="paragraph">
<p>Mais les applications Single Page propose un template de page principal souvent vide. En gros nous avons une page vide et c’est le JavaScript qui va générer le contenu. Hormis Google qui a enrichit son robot pour être capable de parser les sites écrits en Angular, la plupart des moteurs de recherche vont au plus simple.</p>
</div>
<div class="paragraph">
<p>Conséquence votre site n’est pas indexé. Vous pouvez faire des parades et intercepter l’agent appelant votre serveur. Si ce dernier est un robot vous pouvez renvoyer des pages statiques. Déporter le rendering côté serveur permet de résoudre ce problème, car dans tous les cas le HTML généré contiendra toutes les informations.</p>
</div>
<div class="paragraph">
<p>Le deuxième problème est lié au partage de lien dans les applications sociales. Quand vous indiquez une URL dans un message Twitter, Facebook, Google+, un aperçu du site est potentiellement joint au message. Mais si votre site utilise un framework comme Angular, ces services ne voient qu’une page blanche.</p>
</div>
<div class="paragraph">
<p>Le dernier point concerne le temps de chargement de votre application. On sait que les utilisateurs n’aiment pas attendre mais quand votre application Angular se charge elle peut mettre du temps à le faire en fonction de sa taille. Prémâcher le travail côté serveur peut dans ce cas encore, aider à améliorer ce qu’on appel le first loadtime.</p>
</div>
<div class="paragraph">
<p>Nous savons maintenant pourquoi cette fonctionnalité peut être intéressante mais que se passe t-il si une fois l’application chargée l’utilisateur effectue des actions (car la page est finalisée et le framework Angular non boostrapé).. La librairie preload.js permet d’enregistrer les différents événements et de les rejouer une fois que l’application est initialisée.</p>
</div>
<div class="paragraph">
<p>Après on peut se dire mais c’est cool on a du pre rendering mais qu’en est il quand vous utilisez votre application ? En fait tout se passe comme avant, si votre route a besoin de charger un nouveau module il le fait, si un nouveau template doit être affiché il est compilé et chargé. En gros le server side rendering permet surtout d’améliorer les performances au premier chargement.</p>
</div>
<div class="paragraph">
<p>Universal est le nom de code du projet où vou retrouverez toutes les informations pour faire du server side rendering en Angular. Pour le moment votre serveur doit être en .Net ou Node. Spring travaille sur le sujet pour nous fournir ça dans les applications Java.</p>
</div>
</div>
</div></div></div></div></app-asciidoc-viewer><!----><app-footer _ngcontent-ng-c582792440 _nghost-ng-c2660501952 ngh="0"><footer _ngcontent-ng-c2660501952><div _ngcontent-ng-c2660501952 class="dm_footer"><div _ngcontent-ng-c2660501952 class="is-small-screen"><p _ngcontent-ng-c2660501952 id="footer-dm_society"> SARL au capital de <i _ngcontent-ng-c2660501952>5000€</i><br _ngcontent-ng-c2660501952> SIREN : 808 720 759, au RCS de Saint-Etienne<br _ngcontent-ng-c2660501952> All right reserved - ©2024 Guillaume EHRET </p></div><div _ngcontent-ng-c2660501952 class="is-large-screen"><div _ngcontent-ng-c2660501952 class="dm_footer__middle"><div _ngcontent-ng-c2660501952 class="dm_society"> Dev-Mind </div><div _ngcontent-ng-c2660501952>SARL au capital de <i _ngcontent-ng-c2660501952>5000€</i></div><div _ngcontent-ng-c2660501952>SIREN : 808 720 759, au RCS de Saint-Etienne</div><div _ngcontent-ng-c2660501952><small _ngcontent-ng-c2660501952>Mise à jour le 31/05/2024</small></div></div><div _ngcontent-ng-c2660501952 class="dm_footer__right"> All right reserved - ©2024 Guillaume EHRET </div></div></div></footer></app-footer></app-root>

<script src="polyfills-A7MJM4D4.js" type="module"></script><script src="main-ETA6435P.js" type="module"></script>

<script id="ng-state" type="application/json">{"__nghData__":[{},{"t":{"7":"t6"},"c":{"7":[{"i":"t6","r":1,"x":4}]}},{"c":{"1":[{"i":"c933498719","r":1}]}}]}</script></body></html>