<!DOCTYPE html><html lang="en" data-critters-container><head>
  <meta charset="utf-8">
  <title>Blog</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <style>
    body {
      min-height: 100vh;
      max-height: 100vh;
      font-family: "Helvetica", "Arial", "sans-serif";
      padding: 0;
      margin: 0;
    }

    header {
      height: 90px;
      max-height: 90px;
      box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
      background-color: white;
      display: -webkit-flex;
      display: flex;
      flex-direction: column;
      box-sizing: border-box;
      z-index: 99;
      transition-duration: 0.2s;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-property: max-height, box-shadow;
      position: fixed;
      width: 100%;
      text-align: center;
    }
    header hr {
      width:100%;
      background-color: #424242;
      border-color: #424242;
      display: block;
      border: 0;
      height: 0.5em;
      margin: 0;
    }
    .header-img {
      margin: auto;
      width: 50%;
      padding-top: 0.5em;
      height: 30px;
    }
    .header-img img {
      max-height: 30px !important;
    }
    .header-space {
      min-height: 90px;
    }


    @media screen and (min-width: 901px) {
      header {
        height: 120px;
        max-height: 120px;
      }
      .header-img {
        height: 60px;
      }
      .header-img img {
        max-height: 60px !important;
      }
      .header-space {
        min-height: 120px;
      }
      nav a {
        padding: 6px 24px;
      }
      .nav-home{
        display: block !important;
      }
    }


    nav {
      display: -webkit-flex;
      display: flex;
      margin: auto;
    }

    nav a {
      padding: 0 12px;
      line-height: 28px;
      height: 28px;
      color: #424242;
      margin: auto;
      text-decoration: none;
      text-transform: uppercase;
      font-weight: 600;
      font-size: 13px;
      border-radius: 4px;
    }
    .nav-home{
      display: none;
    }
    nav a > img {
    // height: 20px;
    }

    nav a:hover {
      background-color: #9e9e9e;
    }

    nav .active {
      background-color: rgba(0, 0, 0, 0.14);
    }

    main {
      overflow-x: hidden;
    }

    img, picture {
      max-width: 100%;
      height: auto;
      margin: auto;
    }

    * {
      box-sizing: border-box; /* pour ma√Ætriser width et flex-basis */
    }

    .devmind-section {
      display: block;
      margin: 0 auto;
      max-width: 1600px;
      padding: 60px 40px;
    }

    @media (max-width: 700px) {
      .devmind-section {
        padding: 25px 10px;
      }
    }

    @media (min-width: 701px) and (max-width: 900px) {
      .devmind-section {
        padding: 40px 25px;
      }
    }

    .dm-social {
      min-width: 2em;
      max-width: 2em;
      width: 2em;
      height: 2em;
    }
  </style>
  <script>
    function copyToClipboard(id) {
      const text = document.getElementById(id).innerText
        .replaceAll('~$', '')
        .replaceAll('(1)', '')
        .replaceAll('(2)', '')
        .replaceAll('(3)', '')
        .replaceAll('(4)', '')
        .replaceAll('(5)', '')
        .replaceAll('(6)', '')
        .replaceAll('(7)', '')
        .replaceAll('(8)', '')
        .replaceAll('(9)', '')
        .replaceAll('(10)', '')
      ;
      navigator.clipboard.writeText(text.substring(0, text.length));
    }
  </script>
<style>code[class*=language-]{color:#555;background:none;text-shadow:0 1px white;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}.imageblock{text-align:center}blockquote>.paragraph{box-shadow:0 4px 5px #00000024,0 1px 10px #0000001f,0 2px 4px -1px #0003;padding:1em;background-color:#424242;color:#fff;border-radius:4px}.toc{background:#f0f8ff;padding:1em}h1,h2{font-weight:100}h1{font-size:35px;line-height:38px}.dm-block--blog{width:100%;background-color:#eceff1;color:#424242;padding:0;margin:0}.dm-block--blog a,.dm-block--blog a:hover,.dm-block--blog a:visited{font-weight:700;color:#424242;text-decoration:none;cursor:pointer}.dm-block--blog a:hover{color:#424242;text-decoration:underline}.dm-block--blog .link{display:block}.btn-copy-code{background-color:#fff;border:2px solid white;border-radius:24px;color:#424242!important;margin:1em .5em auto auto;font-weight:700;font-size:16px;display:block;cursor:pointer;width:auto;text-align:center;box-shadow:0 4px 5px #00000024,0 1px 10px #0000001f,0 2px 4px -1px #0003;padding:4px;font-size:small}.btn-copy-code:hover{background-color:#424242;border:2px solid #424242;color:#fff!important;padding:.5em 1em}footer{background-color:#424242}.is-small-screen{display:none}.is-large-screen{display:inherit}@media screen and (max-width: 900px){.is-small-screen{display:inherit}.is-large-screen{display:none}}h1,h2{color:#424242;font-weight:100}h1{font-weight:bolder;font-size:35px;line-height:38px}h2{font-size:25px;line-height:28px}@media (max-width: 700px){h1{font-size:28px;line-height:30px}h2{font-size:22px;line-height:24px}}
</style><link rel="stylesheet" href="styles-2TVDB7GC.css" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-2TVDB7GC.css"></noscript><style ng-app-id="ng">.dm_footer[_ngcontent-ng-c2660501952]{color:#eee;display:flex;justify-content:space-between;font-size:14px}.dm_footer[_ngcontent-ng-c2660501952]   .dm_society[_ngcontent-ng-c2660501952]{color:#fff}.dm_footer[_ngcontent-ng-c2660501952]   div[_ngcontent-ng-c2660501952]{margin-right:1em;width:100%}.dm_footer[_ngcontent-ng-c2660501952]   .dm_footer__middle[_ngcontent-ng-c2660501952]{flex-grow:1}.dm_footer[_ngcontent-ng-c2660501952]   .dm_footer__right[_ngcontent-ng-c2660501952]{text-align:right}.dm_footer[_ngcontent-ng-c2660501952]   .is-large-screen[_ngcontent-ng-c2660501952]{padding:.7em;margin:.7em 1em}.dm_footer[_ngcontent-ng-c2660501952]   .is-small-screen[_ngcontent-ng-c2660501952]{padding:0;margin:0 1em;font-size:12px}</style><style ng-app-id="ng">h1{margin-top:.5em}.dm-blog--info-date{font-size:smaller;color:#424242;border:1px solid #aaa;border-radius:24px;padding:.5em 1em;margin-right:.5em;display:inline}.blog-keywords{display:flex;margin-bottom:1em}.blog-keywords .dm-blog--keyword-detail{background-color:#ccc;color:#424242;padding:.5em 1em;margin-right:.5em;border-radius:24px;font-size:smaller}.toc{background-color:#ccc;margin-top:1em;border:1px solid #ccc;padding:1em;border-radius:8px}.toc #toctitle{font-weight:700;margin-bottom:.5em}img{max-width:100%;height:auto}.imageblock>.content{display:flex;justify-content:center;align-items:center}.highlight{display:block;overflow-x:auto;background:#f3f3f3;color:#444;padding:1.5em;box-shadow:0 8px 16px #00000026;border-radius:8px}code.hljs{padding:3px 5px}.hljs-comment{color:#697070}.hljs-punctuation,.hljs-tag{color:#444a}.hljs-tag .hljs-attr,.hljs-tag .hljs-name{color:#444}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-name,.hljs-selector-tag{font-weight:700}.hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#800}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-link,.hljs-operator,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#ab5656}.hljs-literal{color:#695}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code{color:#397300}.hljs-meta{color:#1f7199}.hljs-meta .hljs-string{color:#38a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.language-kotlin:before{display:block;float:right;content:"kotlin";font-weight:700;text-transform:uppercase}.language-typescript:before{display:block;float:right;content:"typescript";font-weight:700;text-transform:uppercase}.language-java:before{display:block;float:right;content:"java";font-weight:700;text-transform:uppercase}.language-javascript:before{display:block;float:right;content:"javascript";font-weight:700;text-transform:uppercase}.language-shell:before{display:block;float:right;content:"shell";font-weight:700;text-transform:uppercase}.language-yaml:before{display:block;float:right;content:"yaml";font-weight:700;text-transform:uppercase}.language-json:before{display:block;float:right;content:"json";font-weight:700;text-transform:uppercase}.language-xml:before{display:block;float:right;content:"xml";font-weight:700;text-transform:uppercase}.language-html:before{display:block;float:right;content:"html";font-weight:700;text-transform:uppercase}.language-css:before{display:block;float:right;content:"css";font-weight:700;text-transform:uppercase}.language-scss:before{display:block;float:right;content:"scss";font-weight:700;text-transform:uppercase}
</style></head>
<body><!--nghm-->
  <app-root _nghost-ng-c582792440 ng-version="18.0.0" ngh="2" ng-server-context="ssg"><app-header _ngcontent-ng-c582792440 _nghost-ng-c2882497807 ngh="0"><header _ngcontent-ng-c2882497807><div _ngcontent-ng-c2882497807 class="header-img"><a _ngcontent-ng-c2882497807 routerlink="/" aria-label="Accueil" href="/"><img _ngcontent-ng-c2882497807 src="img/logo/logo_long.svg" alt="Dev-Mind" title="Dev-Mind"></a></div><nav _ngcontent-ng-c2882497807><a _ngcontent-ng-c2882497807 routerlink="/" aria-label="Accueil" class="nav-home" href="/"><img _ngcontent-ng-c2882497807 src="/img/ic_home_white_24px.svg" rel="start" alt="Accueil"></a><a _ngcontent-ng-c2882497807 routerlink="/formations.html" aria-label="Formations" class href="/formations.html"> Formations</a><a _ngcontent-ng-c2882497807 routerlink="/blog.html" aria-label="Blog" class="active" href="/blog.html">Blog</a><a _ngcontent-ng-c2882497807 routerlink="/experience.html" aria-label="Experience" class href="/experience.html"> Exp√©rience</a></nav><hr _ngcontent-ng-c2882497807></header><div _ngcontent-ng-c2882497807 class="header-space"></div></app-header><router-outlet _ngcontent-ng-c582792440></router-outlet><app-asciidoc-viewer ngh="1"><div class="dm-block--blog"><div class="devmind-section"><h1><!--ngetn--></h1><div class="blog-keywords"><div class="dm-blog--info-date">07/06/2019</div><div class="dm-blog--keyword-detail">Android</div><!---->&nbsp; </div><div class="preview"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a class="link" fragment="#_kotlin_simplifie_la_syntaxe">Kotlin simplifie la syntaxe</a></li>
<li><a class="link" fragment="#_null_safety">Null safety</a></li>
<li><a class="link" fragment="#_immutabilit√©">Immutabilit√©</a></li>
<li><a class="link" fragment="#_valeurs_par_d√©faut">Valeurs par d√©faut</a></li>
<li><a class="link" fragment="#_classes">Classes</a>
<ul class="sectlevel2">
<li><a class="link" fragment="#_classes_pojo">Classes POJO</a></li>
<li><a class="link" fragment="#_classes_internes">Classes internes</a></li>
<li><a class="link" fragment="#_classes_anonymes">Classes anonymes</a></li>
</ul>
</li>
<li><a class="link" fragment="#_extensions_de_fonction">Extensions de fonction</a></li>
<li><a class="link" fragment="#_fonctions_dordre_sup√©rieur">Fonctions d‚Äôordre sup√©rieur</a>
<ul class="sectlevel2">
<li><a class="link" fragment="#_exemple_dans_le_langage">Exemple dans le langage</a></li>
<li><a class="link" fragment="#_ecrire_un_dsl">Ecrire un DSL</a></li>
<li><a class="link" fragment="#_android">Android</a></li>
</ul>
</li>
<li><a class="link" fragment="#_coroutines">Coroutines</a>
<ul class="sectlevel2">
<li><a class="link" fragment="#_conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>En 2017 une grande annonce a √©t√© faite √† <a href="https://www.youtube.com/watch?v=fPzxfeDJDzY&amp;list=PLWz5rJ2EKKc-odHd6XEaf7ykfsosYyCKp&amp;index=51&amp;t=0s">Google IO</a>. Le langage <a href="https://kotlinlang.org/">Kotlin</a> devenait le deuxi√®me langage de r√©f√©rence pour d√©velopper des applications Android. <a href="https://kotlinlang.org/">Kotlin</a> a √©t√© cr√©√© par la soci√©t√© <a href="https://www.jetbrains.com/">JetBrains</a>, √©diteur de <a href="https://developer.android.com/studio/">Android Studio</a> (IDE de r√©f√©rence pour le d√©veloppement Android). <a href="https://www.jetbrains.com/">JetBrains</a> collabore depuis plusieurs ann√©e avec Google pour toujours am√©liorer ce studio de d√©veloppement. Ce studio a √©t√© initialement √©t√© √©crit en Java puis en Kotlin.</p>
</div>
<div class="paragraph">
<p>Pourquoi Google a t‚Äôil fait cette annonce ? Etait ce li√© au proc√®s avec la soci√©t√© Oracle sur l‚Äôutilisation de Java ?  Etait ce li√© aux possibilit√©s offertes par ce langage ? Etait ce li√© aux possibilit√©s offertes par cette collabiration √©troite entre les deux soci√©t√©s ?</p>
</div>
<div class="paragraph">
<p>Personnellement je pense que Kotlin a √©t√© adopt√© pour toutes ces raisons. <a href="https://kotlinlang.org/">Kotlin</a> a essay√© de m√™ler le meilleur de diff√©rents langages et je trouve qu‚Äôil a v√©ritablement redonn√© un coup de boost aux d√©veloppeurs Android (moi le premier). Deux ans apr√®s, <a href="https://android-developers.googleblog.com/2019/05/kotlin-is-everywhere-join-global-event.html">50% des d√©veloppeurs Android</a> utilisent Kotlin.</p>
</div>
<div class="paragraph">
<p>En mai √† Google I/O 2019, Google a <a href="https://android-developers.googleblog.com/2019/05/google-io-2019-empowering-developers-to-build-experiences-on-Android-Play.html">annonc√©</a> une nouvelle √©tape dans l‚Äôadoption de Kotlin. Les d√©veloppements Android deviennent Kotlin-first. Google conseille aux d√©veloppeurs d‚Äôutiliser Kotlin pour les nouveaux d√©veloppements. En interne, les librairies commencent aussi √† √™tre √©crite directement en Kotlin. Comme Kotlin est 100% interop√©rable avec Java ce virage ne va pas p√©naliser les projets existants.</p>
</div>
<div class="paragraph">
<p>Dans cet article, nous allons revenir sur les int√©r√™ts du langage pour comprendre pourquoi Kotlin est devenu le langage de r√©f√©rence pour les d√©veloppements Android.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/blog/2019/kotlin_et_android.png" alt="Kotlin et Android">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kotlin_simplifie_la_syntaxe">Kotlin simplifie la syntaxe</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quand nous utilisons le langage Java et tout particuli√®rement quand nous devons √©crire une application Android, nous devons √©crire beaucoup de code fastidieux. Kotlin met en avant le pragmatisme et la simplicit√©.</p>
</div>
<div class="paragraph">
<p>La philosophie de Kotlin est :</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Tout ce qui peut √™tre d√©duit par le compilateur, n‚Äôa pas besoin d‚Äô√™tre √©crit par le d√©veloppeur.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Prenons l‚Äôexemple d‚Äôune classe Java permettant d‚Äô√™tre ex√©cut√©e et d‚Äôafficher un message <code>Hello World</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447062616.8582"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Dev-Mind"</span>;
        System.out.println(<span class="hljs-string">"Hello world "</span> + name);
    }
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062616.8582')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>En Kotlin vous pouvez faire la m√™me chose en √©crivant</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062617.296"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">val</span> name = <span class="hljs-string">"Dev-Mind"</span>
    println(<span class="hljs-string">"Hello world $name"</span>)
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062617.296')">Copy</button></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>La visibilit√© <code>public</code> est celle par d√©faut et donc plus besoin de la d√©finir √† chaque fois</p>
</li>
<li>
<p>Vous pouvez √©crire des fonctions non attach√©es √† une classe (le compilateur le fera pour vous)</p>
</li>
<li>
<p>Les points virgules ne sont plus n√©c√©ssaires</p>
</li>
<li>
<p>Kotlin fait beaucoup d‚Äôinf√©rence de type et vous n‚Äôavez pas besoin de d√©finir le type si le compilateur peut le d√©duire (exemple du name)</p>
</li>
<li>
<p>Vous pouvez utiliser des templates de String et directement acc√©der au contenu d‚Äôune variable avec <code>$</code></p>
</li>
<li>
<p>‚Ä¶‚Äã</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_null_safety">Null safety</h2>
<div class="sectionbody">
<div class="paragraph">
<p>L‚Äôerreur la plus courante pour un d√©veloppeur Java, est de se retrouver avec un programme qui plante suite √† une exception <code>Null Pointer Exception</code>. En Java, un objet non allou√© √† une r√©f√©rence nulle. En Kotlin le null est interdit. Vous aurez une erreur de compilation si vous d√©clarer un objet et que ce dernier n‚Äôest pas initilialis√©. Si vraiment vous voulez g√©rer une valeur nulle, tout le syst√®me de type a √©t√© doubl√© et vous pouvez ajouter <code>?</code> √† un type pour dire qu‚Äôune valeur peut √™tre nulle</p>
</div>
<div class="paragraph">
<p>Par exemple</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062617.0767"><span class="hljs-keyword">var</span> name:String         <span class="hljs-comment">// Erreur de compilation</span>
<span class="hljs-keyword">var</span> name:String = <span class="hljs-literal">null</span>  <span class="hljs-comment">// Erreur de compilation</span>
<span class="hljs-keyword">var</span> name = <span class="hljs-string">"Dev-Mind"</span>   <span class="hljs-comment">// Valide et pas besoin de d√©finir un type car le compilateur peut le deviner</span>
<span class="hljs-keyword">var</span> name:String? = <span class="hljs-literal">null</span> <span class="hljs-comment">// Valide car on utilise le type String? qui veut dire String nullable</span></code><button class="btn-copy-code" onclick="copyToClipboard('1731447062617.0767')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Au premier abord, cette fonctionnalit√© peut para√Ætre contraignante mais c‚Äôest un r√©el plaisir √† l‚Äôutiliser et ceci √©vite bon nombre de bugs d‚Äôinadvertance.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_immutabilit√©">Immutabilit√©</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une autre force de Kotlin est de pr√©coniser l‚Äôimmutabilit√©. Quand vous d√©finissez une valeur avec le mot cl√© <code>val</code> elle est non mutable. Si vous voulez changer une r√©f√©rence plus tard vous devrez utiliser le mot cl√© <code>var</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062618.539"><span class="hljs-keyword">val</span> name = <span class="hljs-string">"Dev-Mind"</span>
name = <span class="hljs-string">"Guillaume"</span>      <span class="hljs-comment">// Erreur de compilation car immutable</span>

<span class="hljs-keyword">var</span> name2 = <span class="hljs-string">"Dev-Mind"</span>
name2 = <span class="hljs-string">"Guillaume"</span>     <span class="hljs-comment">// OK car mutable</span></code><button class="btn-copy-code" onclick="copyToClipboard('1731447062618.539')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Kotlin impl√©mente les API Java pour les listes mais distingue les listes mutables et non mutables. Par d√©faut tout est immutable. Si vous voulez une liste mutable vous devez le pr√©ciser</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062618.1362"><span class="hljs-keyword">val</span> names = listOf(<span class="hljs-string">"Dev-Mind"</span>, <span class="hljs-string">"Guillaume"</span>)
names.add(<span class="hljs-string">"NewName"</span>)    <span class="hljs-comment">// Erreur de compilation car add n'existe pas sur une liste immutable</span>


<span class="hljs-keyword">val</span> names = mutableListOf(<span class="hljs-string">"Dev-Mind"</span>, <span class="hljs-string">"Guillaume"</span>)
names.add(<span class="hljs-string">"NewName"</span>)</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062618.1362')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>M√™me si Kotlin distingue les listes mutables et non mutables, Kotlin n‚Äôa pas r√©invent√© de nouvelles classes pour g√©rer les listes. Kotlin s‚Äôappuie sur les types existants Java.</p>
</div>
<div class="paragraph">
<p>Kotlin vous pousse √† appliquer des principes de la programmation fonctionnelle (dont l‚Äôimmutabilit√©) pour le plus grand bien de votre code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_valeurs_par_d√©faut">Valeurs par d√©faut</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kotlin vous permet de pr√©ciser des valeurs par d√©faut √† vos diff√©rents param√®tres de vos m√©thodes</p>
</div>
<div class="paragraph">
<p>Par exemple avec le code suivant,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062619.9778"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">formatDate</span><span class="hljs-params">(string: <span class="hljs-type">Date</span>, format: <span class="hljs-type">String</span> = <span class="hljs-string">"yyyy-MM-dd"</span>, addDay: <span class="hljs-type">Int</span> =<span class="hljs-number">0</span>)</span></span> : String</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062619.9778')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>vous pouvez avoir diff√©rentes mani√®res d‚Äôappeler cette m√©thode</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062619.3516">formatDate(Date())              <span class="hljs-comment">// On ne pr√©cise pas les valeurs si celles par d√©faut sont suffisantes</span>
formatDate(Date(), <span class="hljs-string">"yyyy"</span>)      <span class="hljs-comment">// Dans mon cas je ne change que la deuxi√®me valeur</span>
formatDate(Date(), addDay = <span class="hljs-number">2</span>)  <span class="hljs-comment">// Si je veux pr√©ciser une valeur particuli√®re je peux u tiliser les param√®tres nomm√©s</span></code><button class="btn-copy-code" onclick="copyToClipboard('1731447062619.3516')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Les param√®tres nomm√©s (comme sur la derni√®re ligne de notre exemple) sont tr√®s pratiques quand vous voulez apporter plus de lisibilit√© √† votre code. Par exemple si vous avez la m√©thode suivante</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062620.947"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">findSpeaker</span><span class="hljs-params">(firstname: <span class="hljs-type">String</span>, lastname: <span class="hljs-type">String</span>)</span></span>: Speaker</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062620.947')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Quand vous appelez votre m√©thode sans nommer les param√®tres vous ne savez jamais si c‚Äôest le nom ou pr√©nom qui est en premier. Il suffit que votre coll√®gue change la signature et inverse l‚Äôordre des param√®tres et vous avez un bug totalement transparent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062620.2517"><span class="hljs-keyword">val</span> speaker1 = findSpeaker(<span class="hljs-string">"Chet"</span>, <span class="hljs-string">"Haase"</span>)
<span class="hljs-keyword">val</span> speaker1 = findSpeaker(firstname = <span class="hljs-string">"Chet"</span>, lastname = <span class="hljs-string">"Haase"</span>)  <span class="hljs-comment">// les param√®tres nomm√©s am√®nent plus de lisibilit√©</span></code><button class="btn-copy-code" onclick="copyToClipboard('1731447062620.2517')">Copy</button></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_classes">Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les classes sont bien √©videmment disponible en Kotlin. Prenons un exemple pour regarder les diff√©rences avec les classes Java.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447062620.8315"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span>{ }</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062620.8315')">Copy</button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" id="1731447062621.5364"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Parent</span>{}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062621.5364')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>En Java ces deux classes publiques doivent √™tre d√©finies dans 2 fichiers .java diff√©rent. En Kotlin vous pouvez √©crire le tout dans un seul fichier</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062621.7405"><span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> : <span class="hljs-type">Parent</span>()</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062621.7405')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Notez que la classe m√®re doit √™tre pr√©c√©d√©e du mot cl√© <code>open</code>. Par d√©faut les classes Kotlin sont d√©finies comme <code>public final</code>. Si vous voulez ouvrir une classe √† la surcharge, vous devrez le pr√©ciser.</p>
</div>
<div class="sect2">
<h3 id="_classes_pojo">Classes POJO</h3>
<div class="paragraph">
<p>Un POJO (Plain Old Java Object) est une simple classe qui va contenir des donn√©es. G√©n√©ralement sur ce type d‚Äôobjet</p>
</div>
<div class="ulist">
<ul>
<li>
<p>nous d√©finissons des propri√©t√©s private</p>
</li>
<li>
<p>nous g√©n√©rons des constructeurs avec les valeurs obligatoires</p>
</li>
<li>
<p>nous g√©n√©rons des m√©thodes pour lire et modifier ces propri√©t√©s: getter, setter</p>
</li>
<li>
<p>nous g√©n√©rons des m√©thodes hashcode, equals, copy</p>
</li>
<li>
<p>et parfois nous √©crivons aussi des builders pour cr√©er rapidement et partiellement une instance de notre objet</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Si j‚Äôessaie de cr√©er une classe <code>Speaker</code> avec 4 propri√©t√©s <code>id</code>, <code>firstname</code>, <code>lastname</code> et <code>age</code> je vais me retrouver avec une classe d‚Äôenviron 100 lignes.</p>
</div>
<div class="paragraph">
<p>Kotlin propose les <code>data class</code> pour lesquelles le compilateur va faire tout ce travail de g√©n√©ration pour vous. Le Pojo speaker se r√©sume au code suivant</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062621.501"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Speaker</span>(<span class="hljs-keyword">val</span> firstname: String,
                   <span class="hljs-keyword">val</span> lastname: String,
                   <span class="hljs-keyword">val</span> age: <span class="hljs-built_in">Int</span>? = <span class="hljs-literal">null</span>,
                   <span class="hljs-keyword">val</span> id: String = UUID.randomUUID().toString())</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062621.501')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Quand votre classe a un seul constructeur vous pouvez le pr√©ciser dans la signature de la classe (comme dans notre classe Speaker). La suppression de tout le code inutile am√©liore la libilit√©.</p>
</div>
<div class="paragraph">
<p>Revenons √† notre exemple, vous pouvez ainsi √©crire</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062622.4568"><span class="hljs-keyword">val</span> s1 = Speaker(<span class="hljs-string">"Chet"</span>, <span class="hljs-string">"Haase"</span>)
<span class="hljs-keyword">val</span> s2 = Speaker(firstname = <span class="hljs-string">"Chet"</span>, lastname = <span class="hljs-string">"Haase"</span>)
<span class="hljs-keyword">val</span> s3 = Speaker(firstname = <span class="hljs-string">"Chet"</span>, lastname = <span class="hljs-string">"Haase"</span>, id = <span class="hljs-string">"123"</span>)

<span class="hljs-keyword">val</span> s4 = s1.copy(age = <span class="hljs-number">999</span>)
<span class="hljs-keyword">val</span> s5 = s1.copy()</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062622.4568')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Le langage propose aussi la surcharge des op√©rateurs. L‚Äôop√©rateur <code>==</code> est surcharg√© et fait appel √† la m√©thode <code>equals</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062622.2844">s1 == s5   <span class="hljs-comment">// =&gt; renvoie true car Kotlin fait appel √† la m√©thode equals</span>
s1 === s5  <span class="hljs-comment">// =&gt; renverra faux car === permet de comparer des r√©f√©rences</span></code><button class="btn-copy-code" onclick="copyToClipboard('1731447062622.2844')">Copy</button></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classes_internes">Classes internes</h3>
<div class="paragraph">
<p>Quand vous programmez une application Android en Java, vous utilisez tr√®s souvent des classes internes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062623.2136"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> {

    <span class="hljs-keyword">public</span> String name(){
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Dev-Mind"</span>;
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
        <span class="hljs-keyword">public</span> void hello(){
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"Hello world"</span> + name()); <span class="hljs-comment">// NE COMPILE PAS car la m√©thode name() n'est pas visible</span>
        }
    }
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062623.2136')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Les classes internes en Java (<code>inner class</code>) sont non statiques par d√©faut et vous pouvez donc utiliser les m√©thodes ou attributs globaux de la classe englobante dans la classe interne. Par exemple dans la classe <code>A</code> je peux utiliser la m√©thode <code>name()</code> de ma classe englobante <code>HelloWorld</code>.</p>
</div>
<div class="paragraph">
<p>Une classe interne non statique a une r√©f√©rence vers sa classe englobante. Si cette derni√®re n‚Äôest plus utilis√©e, le garbage collector ne peut pas faire son travail et la supprimer. En effet elle consid√©r√©e active (utilis√©e par la classe interne). Dans un serveur d‚Äôapplication, quand nous utilisons des singletons ce concept ne pose pas de probl√®me. Dans le monde Android, sur un device avec des ressources limit√©es, c‚Äôest plus probl√©matique. Surtout si nous utilisons des classes internes dans des objets qui sont tr√®s souvent d√©truits et reconstruits (les activit√©s sont supprim√©es et recr√©√©es apr√®s chaque changement de configuration). De nombreux d√©veloppeurs se font avoir et introduisent des fuites m√©moires de cette mani√®re dans leurs applications</p>
</div>
<div class="paragraph">
<p>En Java pour √©viter le probl√®me vous devez utiliser des <code>static inner class</code>. En Kotlin quand vous cr√©ez une nested class vous n‚Äôavez pas acc√®s aux variables et m√©thodes de la classe (√©quivalent d‚Äôune classe interne statique)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062623.216"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> {

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">name</span><span class="hljs-params">()</span></span> = <span class="hljs-string">"Dev-Mind"</span>

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">hello</span><span class="hljs-params">()</span></span> {
            println(<span class="hljs-string">"Hello world"</span> + name())
        }
    }
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062623.216')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Vous pouvez tout de m√™me cr√©er l‚Äô√©quivalent d‚Äôune inner class en utilisant la syntaxe <code>internal inner class</code>. Une fois encore le langage a pris le parti de simplifier le cas d‚Äôutilisation le plus courant.</p>
</div>
</div>
<div class="sect2">
<h3 id="_classes_anonymes">Classes anonymes</h3>
<div class="paragraph">
<p>En Android nous √©crivons souvent des classes anonymes. Par exemple √† chaque fois que nous √©crivons un listener d‚Äô√©v√©nement. Nous avons le m√™me probl√®me de r√©f√©rence entre la classe englobante et la classe anonyme.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062624.6628">button.setOnClickListener{
      <span class="hljs-comment">// votre code</span>
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062624.6628')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Kotlin ne propose pas de solution dans ce cas, mais vous devez garder conscience que vous devrez toujours casser cette r√©f√©rence √† la classe englobante quand l‚Äôobjet sera arr√™t√© ou recycl√©.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062624.4111"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStop</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">super</span>.onStop()
    button.setOnClickListener(<span class="hljs-literal">null</span>)
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062624.4111')">Copy</button></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extensions_de_fonction">Extensions de fonction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quand nous programmons nous utilisons de nombreuses librairies externes sur lesquelles nous n‚Äôavons pas la main. Prenons un cas d‚Äôutilisation. Nous somme l‚ÄôINSEE et nous devons faire des statistiques par √¢ge</p>
</div>
<div class="paragraph">
<p>Un citoyen est d√©fini par la data class suivante</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062624.281"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Citizen</span>(<span class="hljs-keyword">val</span> inseeNumber: String,
                   <span class="hljs-keyword">val</span> firstname: String,
                   <span class="hljs-keyword">val</span> lastname: String,
                   <span class="hljs-keyword">val</span> sexe: Sexe,
                   <span class="hljs-keyword">val</span> birthdate: LocalDate)</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062624.281')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Pour d√©terminer l‚Äô√¢ge vous pouvez √©crire une classe utilitaire</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062624.9827"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getAge</span><span class="hljs-params">(date: <span class="hljs-type">LocalDate</span>)</span></span> = LocalDate.now().year - date.year</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062624.9827')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Avec Kotlin vous pouvez aussi √©tendre la classe <code>LocalDate</code> et cr√©er une nouvelle m√©thode (extension de fonction) qui vous sera propre et que vous pourrez utiliser dans tout votre projet. Par exemple</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062625.4358"><span class="hljs-function"><span class="hljs-keyword">fun</span> LocalDate.<span class="hljs-title">getAge</span><span class="hljs-params">()</span></span> = LocalDate.now().year - <span class="hljs-keyword">this</span>.year

<span class="hljs-comment">// Ce qui permet d'√©crire</span>
LocalDate.parse(<span class="hljs-string">"1977-01-01"</span>).getAge()</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062625.4358')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Mieux au lieu d‚Äôexposer une fonction vous pouvez exposer une propri√©t√©</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062625.2107"><span class="hljs-keyword">val</span> LocalDate.age
    <span class="hljs-keyword">get</span>() = LocalDate.now().year - <span class="hljs-keyword">this</span>.year

<span class="hljs-comment">// Ce qui permet d'√©crire</span>
LocalDate.parse(<span class="hljs-string">"1977-01-01"</span>).age</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062625.2107')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Prenons un autre exemple li√© √† Android. Tr√®s souvent quand nous cr√©ons une application, nous surchargeons l‚Äôobjet <code>Application</code> Android pour cr√©er notre propre instance. Pour √©viter les cast √† r√©p√©tition dans les activit√©s vous pouvez √©crire</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062625.4363"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DevMindApplication</span> : <span class="hljs-type">Application</span>() {
   <span class="hljs-comment">// code...</span>
}
<span class="hljs-keyword">val</span> AppCompatActivity.devmindApp
    <span class="hljs-keyword">get</span>() = <span class="hljs-keyword">this</span>.application <span class="hljs-keyword">as</span> DevMindApplication</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062625.4363')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Ainsi dans vos activit√©s vous pouvez directement faire appel √† votre instance de l‚Äôapplication en utilisant <code>devmindApp</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fonctions_dordre_sup√©rieur">Fonctions d‚Äôordre sup√©rieur</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une fonction d‚Äôordre sup√©rieure est une fonction qui prend une fonction comme argument.</p>
</div>
<div class="paragraph">
<p>Dans ce cas vous n‚Äôavez pas besoin de passer une lambda lors de l‚Äôappel √† la m√©thode mais vous pouvez ajouter un bloc d‚Äôex√©cution juste apr√®s l‚Äôappel de la m√©thode</p>
</div>
<div class="paragraph">
<p>Dit comme √ßa vous devez √™tre perdu et c‚Äôest normal</p>
</div>
<div class="sect2">
<h3 id="_exemple_dans_le_langage">Exemple dans le langage</h3>
<div class="paragraph">
<p>Kotlin s‚Äôest servi des fonctions d‚Äôordre sup√©rieur (et des extension) pour simplifier l‚Äôutilisation des stream Java</p>
</div>
<div class="listingblock">
<div class="title">Issu de kotlin.collections</div>
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062626.5103"><span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> &lt;T&gt; Iterable&lt;T&gt;.<span class="hljs-title">find</span><span class="hljs-params">(predicate: (<span class="hljs-type">T</span>) <span class="hljs-title class_">-&gt;</span> <span class="hljs-type">Boolean</span>)</span></span>: T? {
    <span class="hljs-keyword">return</span> firstOrNull(predicate)
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062626.5103')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Si nous avons une collection de speakers nous pouvons s√©lectionner le premier qui a le pr√©nom Guillaume via ce code</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062626.0718"><span class="hljs-keyword">val</span> guillaume = speakers.firstOrNull {
    it.firstname == <span class="hljs-string">"Guillaume"</span>  <span class="hljs-comment">// it correpond √† l'item en cours</span>
}

<span class="hljs-comment">// Vous auriez pu aussi √©crire</span>
<span class="hljs-keyword">val</span> guillaume = speakers.firstOrNull { speaker <span class="hljs-meta">-&gt;</span>
    speaker.firstname == <span class="hljs-string">"Guillaume"</span>
}

<span class="hljs-comment">// Ici la syntaxe Java (o√π vous passez une lambda provoque une erreur de compilation)</span>
<span class="hljs-keyword">val</span> guillaume = speakers.firstOrNull(speaker <span class="hljs-meta">-&gt;</span> speaker.firstname == <span class="hljs-string">"Guillaume"</span>) <span class="hljs-comment">// ne compile pas</span></code><button class="btn-copy-code" onclick="copyToClipboard('1731447062626.0718')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>En Java, pour rappel vous auriez √©crit</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062627.7034"><span class="hljs-keyword">val</span> guillaumeSpeakers = speakers.stream()
                                .filter(s <span class="hljs-meta">-&gt;</span> s.getFirstname().equals(<span class="hljs-string">"Guillaume"</span>))
                                .findFirst()
                                .orElse(<span class="hljs-literal">null</span>);</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062627.7034')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>L‚ÄôAPI Stream Java est tr√®s agr√©able √† utiliser, mais les collections et les fonctions d‚Äôextensions Kotlin le sont encore plus.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ecrire_un_dsl">Ecrire un DSL</h3>
<div class="paragraph">
<p>Kotlin est de plus en plus connu pour la souplesse offerte pour √©crire un DSL avec un typage fort. <a href="https://github.com/gradle/kotlin-dsl">Gradle</a> est en train par exemple de remplacer Groovy par Kotlin pour avoir un DSL plus puissant</p>
</div>
<div class="paragraph">
<p>Un exemple</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062628.5024"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cell</span>(<span class="hljs-keyword">val</span> content: String)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Row</span>(<span class="hljs-keyword">val</span> cells: <span class="hljs-symbol">MutableList&lt;Cell&gt; = mutableListOf()) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">cell</span><span class="hljs-params">(adder: () <span class="hljs-title class_">-&gt;</span> <span class="hljs-type">Cell</span>)</span></span>: Row {
        cells.add(adder())
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Table</span>(<span class="hljs-keyword">val</span> rows: <span class="hljs-symbol">MutableList&lt;Row&gt; = mutableListOf()) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">row</span><span class="hljs-params">(adder: () <span class="hljs-title class_">-&gt;</span> <span class="hljs-type">Row</span>)</span></span>: Table {
        rows.add(adder())
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
    }
}</span></span></code><button class="btn-copy-code" onclick="copyToClipboard('1731447062628.5024')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ma classe <code>Table</code> j‚Äôai ajout√© une fonction <code>row</code> (avec une fonction en argument) qui permet d‚Äôajouter une ligne. La m√™me chose a √©t√© faite dans la classe <code>Row</code> pour une cellule. Du coup je peux √©crire</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062628.5652"><span class="hljs-keyword">val</span> table = Table()
    .row { Row().cell { Cell(<span class="hljs-string">"Test"</span>) }}
    .row { Row().cell { Cell(<span class="hljs-string">"Test2"</span>) }}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062628.5652')">Copy</button></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_android">Android</h3>
<div class="paragraph">
<p>Android b√©n√©ficie beaucoup des fonctions d‚Äôordre sup√©rieur et des extensions. Ces fonctionnalit√©s du langage ont permis de consid√©rablement simplfier le langage. Prenons des exemples</p>
</div>
<div class="paragraph">
<p>Ecriture d‚Äôun listener d‚Äô√©v√©nement</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062628.875">itemView.setOnClickListener {
     <span class="hljs-comment">// Code du listener directement</span>
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062628.875')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Quand vous devez it√©rer et enchainer l‚Äôappel √† plusieurs setters d‚Äôun objet</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062628.938">holder.speakerName.text = user.fullname
holder.speakerBio.text = user.descriptionFr
holder.speakerBirthday.text = user.birthday

<span class="hljs-comment">// =&gt; devient</span>
holder.apply {
    speakerName.text = user.fullname
    speakerBio.text = user.descriptionFr
    speakerBirthday.text = user.birthday
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062628.938')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Et il y a des dizaines d‚Äôautres exemples.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_coroutines">Coroutines</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une coroutine est un bloc de traitement qui permet d‚Äôex√©cuter du code non bloquant en asynchrone. C‚Äôest un thread all√©g√©. Vous pouvez lancer plein de couroutines sur un m√™me thread. Vous pouvez aussi d√©marrer un traitement sur un thread et finir son ex√©cution sur un autre.</p>
</div>
<div class="paragraph">
<p>Commen√ßons par faire un rappel sur le d√©veloppement Android. Quand une application est lanc√©e, elle est lanc√©e sur un thread principal. On parle de main thread ou UI thread. En effet le rendering, les √©v√©nements, les appels syst√®mes sont g√©r√©s sur ce thread.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/blog/2019/android_thread.png" alt="Android Main Thread">
</div>
</div>
<div class="paragraph">
<p>Si vous lancez un traitement m√©tier plus ou moins long (calcul, r√©cup√©ration de donn√©es, acc√®s √† une base), vous ne devez pas encombrer ce thread principal pour ne pas bloquer l‚Äôutilisateur. Par exemple si vous lancez une requ√™te base de donn√©es, tout est fig√© tant que la r√©ponse n‚Äôest pas trait√©e. Android est d‚Äôailleurs intol√©rable la dessus. Si votre application bloque le thread principal, le syst√®me killera votre application.</p>
</div>
<div class="paragraph">
<p>Sans Kotlin, vous devez lancer tous les traitements plus ou moins longs dans un autre thread. Et quand vous avez un r√©sultat vous devez interagir avec la vue dans le thread principal pour que les donn√©es soient actualis√©es. Niveau code vous devez √©crire un bon nombre de ligne pour √©crire tout √ßa.</p>
</div>
<div class="paragraph">
<p>En Kotlin vous pouvez passer par les Coroutines. Dans l‚Äôexemple si dessous nous d√©clarons une activit√© qui va lanc√© un acc√®s √† la base dans une coroutine et quand le r√©sultat est l√† nous nous raccrochons au thread principal pour mettre √† jour la vue.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731447062629.3882"><span class="hljs-comment">// Votre activit√© implemente l'interface CoroutineScope</span>
<span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> : <span class="hljs-type">AppCompatActivity</span>(), CoroutineScope {

   <span class="hljs-comment">// Si vous lancez votre coroutine vous devez indiquer dans quel thread elle sera lanc√©. Par d√©faut un nouveau</span>
   <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> coroutineContext: CoroutineContext
       <span class="hljs-keyword">get</span>() = Dispatchers.Default

   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
       <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)

       <span class="hljs-comment">// ...</span>

       <span class="hljs-comment">// Lancement de la coroutine</span>
       launch {

          <span class="hljs-comment">// Vous faites un traitement plus ou moins long (appel base de donn√©es)</span>
		  <span class="hljs-keyword">val</span> speaker = speakerDao.readOne(speakerUiid)

          <span class="hljs-comment">// Quand vous avez un r√©sultat vous vous rattachez au thread principal</span>
          <span class="hljs-comment">// pour mettre √† jour la vue</span>
		  withContext(Dispatchers.Main){
             speaker.apply {
                  speakerLastname.text = speaker.lastname
                  speakerCountry.text = speaker.country
             }
          }
 	   }
   }
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731447062629.3882')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Les couroutines simplifient tous les appels acynchrones, ou les appels synchrones pouvant √™tre longs de votre application. Le code est plus restreint, plus lisible mais aussi plus performant car les couroutines sont beaucoup plus l√©g√®res qu‚Äôun thread.</p>
</div>
<div class="sect2">
<h3 id="_conclusion">Conclusion</h3>
<div class="paragraph">
<p>J‚Äôai essay√© de vous montrer dans cet article pourquoi Kotlin est bien plus qu‚Äôune alternative √† Java pour l‚Äô√©criture des applications Android.</p>
</div>
<div class="paragraph">
<p>Je vous conseille cette <a href="https://www.youtube.com/watch?v=UhDtYFt64HM">vid√©o</a> de Jean Baptiste Nizet qui montre l‚Äôint√©r√™t de ce que je viens de dire en livecoding (sauf l‚Äôaspect coroutine).</p>
</div>
<div class="paragraph">
<p>Personnellement je pense que le langage Java va petit √† petit dispara√Ætre sur Android. Si vous voulez utiliser Kotlin en dehors d‚ÄôAndroid vous pouvez le faire sans probl√®me. Kotlin fait aussi partie des langages support√©s par le framework Spring.</p>
</div>
<div class="paragraph">
<p>Pour plus d‚Äôinformations sur Kotlin &amp; Android vous pouvez aller sur <a href="https://developer.android.com/kotlin/" class="bare">https://developer.android.com/kotlin/</a></p>
</div>
</div>
</div>
</div></div></div></div></app-asciidoc-viewer><!----><app-footer _ngcontent-ng-c582792440 _nghost-ng-c2660501952 ngh="0"><footer _ngcontent-ng-c2660501952><div _ngcontent-ng-c2660501952 class="dm_footer"><div _ngcontent-ng-c2660501952 class="is-small-screen"><p _ngcontent-ng-c2660501952 id="footer-dm_society"> SARL au capital de <i _ngcontent-ng-c2660501952>5000‚Ç¨</i><br _ngcontent-ng-c2660501952> SIREN : 808 720 759, au RCS de Saint-Etienne<br _ngcontent-ng-c2660501952> All right reserved - ¬©2024 Guillaume EHRET </p></div><div _ngcontent-ng-c2660501952 class="is-large-screen"><div _ngcontent-ng-c2660501952 class="dm_footer__middle"><div _ngcontent-ng-c2660501952 class="dm_society"> Dev-Mind </div><div _ngcontent-ng-c2660501952>SARL au capital de <i _ngcontent-ng-c2660501952>5000‚Ç¨</i></div><div _ngcontent-ng-c2660501952>SIREN : 808 720 759, au RCS de Saint-Etienne</div><div _ngcontent-ng-c2660501952><small _ngcontent-ng-c2660501952>Mise √† jour le 12/11/2024</small></div></div><div _ngcontent-ng-c2660501952 class="dm_footer__right"> All right reserved - ¬©2024 Guillaume EHRET </div></div></div></footer></app-footer></app-root>

<script src="polyfills-A7MJM4D4.js" type="module"></script><script src="main-7HWWU66L.js" type="module"></script>

<script id="ng-state" type="application/json">{"__nghData__":[{},{"t":{"7":"t6"},"c":{"7":[{"i":"t6","r":1}]}},{"c":{"1":[{"i":"c490234363","r":1}]}}]}</script></body></html>