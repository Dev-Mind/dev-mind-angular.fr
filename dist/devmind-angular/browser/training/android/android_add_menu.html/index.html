<!DOCTYPE html><html lang="en" data-critters-container><head>
  <meta charset="utf-8">
  <title>Training</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <style>
    body {
      min-height: 100vh;
      max-height: 100vh;
      font-family: "Helvetica", "Arial", "sans-serif";
      padding: 0;
      margin: 0;
    }

    header {
      height: 90px;
      max-height: 90px;
      box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
      background-color: white;
      display: -webkit-flex;
      display: flex;
      flex-direction: column;
      box-sizing: border-box;
      z-index: 99;
      transition-duration: 0.2s;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-property: max-height, box-shadow;
      position: fixed;
      width: 100%;
      text-align: center;
    }
    header hr {
      width:100%;
      background-color: #424242;
      border-color: #424242;
      display: block;
      border: 0;
      height: 0.5em;
      margin: 0;
    }
    .header-img {
      margin: auto;
      width: 50%;
      padding-top: 0.5em;
      height: 30px;
    }
    .header-img img {
      max-height: 30px !important;
    }
    .header-space {
      min-height: 90px;
    }


    @media screen and (min-width: 901px) {
      header {
        height: 120px;
        max-height: 120px;
      }
      .header-img {
        height: 60px;
      }
      .header-img img {
        max-height: 60px !important;
      }
      .header-space {
        min-height: 120px;
      }
      nav a {
        padding: 6px 24px;
      }
      .nav-home{
        display: block !important;
      }
    }


    nav {
      display: -webkit-flex;
      display: flex;
      margin: auto;
    }

    nav a {
      padding: 0 12px;
      line-height: 28px;
      height: 28px;
      color: #424242;
      margin: auto;
      text-decoration: none;
      text-transform: uppercase;
      font-weight: 600;
      font-size: 13px;
      border-radius: 4px;
    }
    .nav-home{
      display: none;
    }
    nav a > img {
    // height: 20px;
    }

    nav a:hover {
      background-color: #9e9e9e;
    }

    nav .active {
      background-color: rgba(0, 0, 0, 0.14);
    }

    main {
      overflow-x: hidden;
    }

    img, picture {
      max-width: 100%;
      height: auto;
      margin: auto;
    }

    * {
      box-sizing: border-box; /* pour maîtriser width et flex-basis */
    }

    .devmind-section {
      display: block;
      margin: 0 auto;
      max-width: 1600px;
      padding: 60px 40px;
    }

    @media (max-width: 700px) {
      .devmind-section {
        padding: 25px 10px;
      }
    }

    @media (min-width: 701px) and (max-width: 900px) {
      .devmind-section {
        padding: 40px 25px;
      }
    }

    .dm-social {
      min-width: 2em;
      max-width: 2em;
      width: 2em;
      height: 2em;
    }
  </style>
  <script>
    function copyToClipboard(id) {
      const text = document.getElementById(id).innerText
        .replaceAll('~$', '')
        .replaceAll('(1)', '')
        .replaceAll('(2)', '')
        .replaceAll('(3)', '')
        .replaceAll('(4)', '')
        .replaceAll('(5)', '')
        .replaceAll('(6)', '')
        .replaceAll('(7)', '')
        .replaceAll('(8)', '')
        .replaceAll('(9)', '')
        .replaceAll('(10)', '')
      ;
      navigator.clipboard.writeText(text.substring(0, text.length));
    }
  </script>
<style>code[class*=language-]{color:#555;background:none;text-shadow:0 1px white;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}.imageblock,.videoblock{text-align:center}.videoblock iframe{max-width:100%}.toc{background:#f0f8ff;padding:1em}h1,h2{font-weight:100}h1{font-size:35px;line-height:38px}.dm-block--blog{width:100%;background-color:#eceff1;color:#424242;padding:0;margin:0}.dm-block--blog a,.dm-block--blog a:hover,.dm-block--blog a:visited{font-weight:700;color:#424242;text-decoration:none;cursor:pointer}.dm-block--blog a:hover{color:#424242;text-decoration:underline}.dm-block--blog .link{display:block}.btn-copy-code{background-color:#fff;border:2px solid white;border-radius:24px;color:#424242!important;margin:1em .5em auto auto;font-weight:700;font-size:16px;display:block;cursor:pointer;width:auto;text-align:center;box-shadow:0 4px 5px #00000024,0 1px 10px #0000001f,0 2px 4px -1px #0003;padding:4px;font-size:small}.btn-copy-code:hover{background-color:#424242;border:2px solid #424242;color:#fff!important;padding:.5em 1em}footer{background-color:#424242}.is-small-screen{display:none}.is-large-screen{display:inherit}@media screen and (max-width: 900px){.is-small-screen{display:inherit}.is-large-screen{display:none}}h1,h2{color:#424242;font-weight:100}h1{font-weight:bolder;font-size:35px;line-height:38px}h2{font-size:25px;line-height:28px}@media (max-width: 700px){h1{font-size:28px;line-height:30px}h2{font-size:22px;line-height:24px}}
</style><link rel="stylesheet" href="styles-F67ARFNE.css" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-F67ARFNE.css"></noscript><style ng-app-id="ng">.dm_footer[_ngcontent-ng-c2660501952]{color:#eee;display:flex;justify-content:space-between;font-size:14px}.dm_footer[_ngcontent-ng-c2660501952]   .dm_society[_ngcontent-ng-c2660501952]{color:#fff}.dm_footer[_ngcontent-ng-c2660501952]   div[_ngcontent-ng-c2660501952]{margin-right:1em;width:100%}.dm_footer[_ngcontent-ng-c2660501952]   .dm_footer__middle[_ngcontent-ng-c2660501952]{flex-grow:1}.dm_footer[_ngcontent-ng-c2660501952]   .dm_footer__right[_ngcontent-ng-c2660501952]{text-align:right}.dm_footer[_ngcontent-ng-c2660501952]   .is-large-screen[_ngcontent-ng-c2660501952]{padding:.7em;margin:.7em 1em}.dm_footer[_ngcontent-ng-c2660501952]   .is-small-screen[_ngcontent-ng-c2660501952]{padding:0;margin:0 1em;font-size:12px}</style><style ng-app-id="ng">h1{margin-top:.5em}.dm-blog--info-date{font-size:smaller;color:#424242;border:1px solid #aaa;border-radius:24px;padding:.5em 1em;margin-right:.5em;display:inline}.blog-keywords{display:flex;margin-bottom:1em}.blog-keywords .dm-blog--keyword-detail{background-color:#ccc;color:#424242;padding:.5em 1em;margin-right:.5em;border-radius:24px;font-size:smaller}.toc{background-color:#ccc;margin-top:1em;border:1px solid #ccc;padding:1em;border-radius:8px}.toc #toctitle{font-weight:700;margin-bottom:.5em}img{max-width:100%;height:auto}.imageblock>.content{display:flex;justify-content:center;align-items:center}.highlight{display:block;overflow-x:auto;background:#f3f3f3;color:#444;padding:1.5em;box-shadow:0 8px 16px #00000026;border-radius:8px}code.hljs{padding:3px 5px}.hljs-comment{color:#697070}.hljs-punctuation,.hljs-tag{color:#444a}.hljs-tag .hljs-attr,.hljs-tag .hljs-name{color:#444}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-name,.hljs-selector-tag{font-weight:700}.hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#800}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-link,.hljs-operator,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#ab5656}.hljs-literal{color:#695}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code{color:#397300}.hljs-meta{color:#1f7199}.hljs-meta .hljs-string{color:#38a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.language-kotlin:before{display:block;float:right;content:"kotlin";font-weight:700;text-transform:uppercase}.language-typescript:before{display:block;float:right;content:"typescript";font-weight:700;text-transform:uppercase}.language-java:before{display:block;float:right;content:"java";font-weight:700;text-transform:uppercase}.language-javascript:before{display:block;float:right;content:"javascript";font-weight:700;text-transform:uppercase}.language-shell:before{display:block;float:right;content:"shell";font-weight:700;text-transform:uppercase}.language-yaml:before{display:block;float:right;content:"yaml";font-weight:700;text-transform:uppercase}.language-json:before{display:block;float:right;content:"json";font-weight:700;text-transform:uppercase}.language-xml:before{display:block;float:right;content:"xml";font-weight:700;text-transform:uppercase}.language-html:before{display:block;float:right;content:"html";font-weight:700;text-transform:uppercase}.language-css:before{display:block;float:right;content:"css";font-weight:700;text-transform:uppercase}.language-scss:before{display:block;float:right;content:"scss";font-weight:700;text-transform:uppercase}
</style></head>
<body><!--nghm-->
  <app-root _nghost-ng-c582792440 ng-version="18.0.0" ngh="2" ng-server-context="ssg"><app-header _ngcontent-ng-c582792440 _nghost-ng-c2882497807 ngh="0"><header _ngcontent-ng-c2882497807><div _ngcontent-ng-c2882497807 class="header-img"><a _ngcontent-ng-c2882497807 routerlink="/" aria-label="Accueil" href="/"><img _ngcontent-ng-c2882497807 src="img/logo/logo_long.svg" alt="Dev-Mind" title="Dev-Mind"></a></div><nav _ngcontent-ng-c2882497807><a _ngcontent-ng-c2882497807 routerlink="/" aria-label="Accueil" class="nav-home" href="/"><img _ngcontent-ng-c2882497807 src="/img/ic_home_white_24px.svg" rel="start" alt="Accueil"></a><a _ngcontent-ng-c2882497807 routerlink="/formations.html" aria-label="Formations" class="active" href="/formations.html"> Formations</a><a _ngcontent-ng-c2882497807 routerlink="/blog.html" aria-label="Blog" class href="/blog.html">Blog</a><a _ngcontent-ng-c2882497807 routerlink="/experience.html" aria-label="Experience" class href="/experience.html"> Expérience</a></nav><hr _ngcontent-ng-c2882497807></header><div _ngcontent-ng-c2882497807 class="header-space"></div></app-header><router-outlet _ngcontent-ng-c582792440></router-outlet><app-asciidoc-viewer ngh="1"><div class="dm-block--blog"><div class="devmind-section"><h1><!--ngetn--></h1><div class="blog-keywords"><div class="dm-blog--info-date">11/10/2023</div><div class="dm-blog--keyword-detail">Android</div><!---->&nbsp; </div><div class="preview"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a class="link" fragment="#_menus">Menus</a></li>
<li><a class="link" fragment="#_flask_create_the_menu"><img src="/img/ic_flask.svg" style="width: 1em"> : Create the menu</a></li>
<li><a class="link" fragment="#_intent_new_use_case">Intent : new use case</a></li>
<li><a class="link" fragment="#_flask_test_your_menu"><img src="/img/ic_flask.svg" style="width: 1em"> : Test your menu</a></li>
<li><a class="link" fragment="#_flask_manage_back_button_to_return_on_main_activity"><img src="/img/ic_flask.svg" style="width: 1em"> : Manage back button to return on main activity</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this lesson you will learn how add a menu and launch intent to open internal or external activities</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/android-add-menu.png" alt="Android course step2" width="800">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_menus">Menus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Menus are a common user interface component in many types of applications. A <a href="https://developer.android.com/guide/topics/resources/menu-resource">menu</a> is a resource as style, color, layout…​</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/firstapp/android-resource1.png" alt="Android resource">
</div>
</div>
<div class="paragraph">
<p>Remember, you can provide alternative resources for specific device configurations, by grouping them in specially-named resource directories.
At runtime, Android uses the appropriate resource based on the current configuration.</p>
</div>
<div class="paragraph">
<p>It exists different types of menus (top, bottom…​). In this lesson we will implement a menu on the top the in app bar. It’s where you should place actions that have a global impact on the app, such as "Compose email", "Settings"…​</p>
</div>
<div class="paragraph">
<p>For all menu types, Android provides a standard XML format to define menu items. Instead of building a menu in your activity’s code, you should define a menu and all its items in an XML file.</p>
</div>
<div class="paragraph">
<p>Using a menu resource is a good practice for a few reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It’s easier to visualize the menu structure</p>
</li>
<li>
<p>It separates the content for the menu from your application’s behavioral code.</p>
</li>
<li>
<p>It allows you to create alternative menu configurations for different platform versions, screen sizes, and other configurations by leveraging the app resources framework.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A menu will have different options (an option is a menu item).</p>
</div>
<div class="paragraph">
<p>It’s time to test by yourself. We want to add a menu in app bar with different options</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a link to open your corporate website (we will open an URL in favorite browser)</p>
</li>
<li>
<p>a link to send you an email (we will open a window to write a new mail in favorite mail app)</p>
</li>
<li>
<p>a link to open the activity used to list building windows</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A menu is linked to an activity, and you can use a different menu on 2 activities of your app.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_flask_create_the_menu"><img src="/img/ic_flask.svg" style="width: 1em"> : Create the menu</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an XML file inside your project’s <strong>res/menu/</strong> directory. For that in the <strong>Project window</strong>, right-click the app folder and select <strong>New &gt; Android resource file</strong>. You can also use menu <strong>File &gt; New &gt; Android resource file</strong></p>
</li>
<li>
<p>In window "New resource File" choose</p>
<div class="ulist">
<ul>
<li>
<p><strong>File name</strong> : main_menu</p>
</li>
<li>
<p><strong>Resource type</strong> : menu</p>
</li>
<li>
<p><strong>Source set</strong> : main</p>
</li>
<li>
<p><strong>Directory name</strong> : menu</p>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/menu/android-menu.png" alt="Add menu resource">
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>File <strong>res/menu/menu.xml</strong> is opened in menu editor. You can use <strong>palette</strong> to add elements. We will add 3 <strong>Menu Items</strong>. Item element supports several attributes to define an item’s appearance and behavior. The main ones are :</p>
<div class="ulist">
<ul>
<li>
<p><strong>id</strong> : an unique resource ID, which allows the application to recognize the item when the user wants to manipulate it in code.</p>
</li>
<li>
<p><strong>icon</strong> : a reference to an optional drawable to use as the item’s icon.</p>
</li>
<li>
<p><strong>title</strong> : a reference to a string to use as the item’s title.</p>
</li>
<li>
<p><strong>showAsAction</strong> : specifies when and how this item should appear as an action item in the app bar. Possible values are</p>
<div class="ulist">
<ul>
<li>
<p><strong>ifRoom</strong> : place this item in the app bar if there is room for it. If there is not room for all the items marked "ifRoom", last items are displayed in the overflow menu.</p>
</li>
<li>
<p><strong>withText</strong>: also include the title text (defined by android:title) with the action item</p>
</li>
<li>
<p><strong>never</strong> : place this item in the app bar’s overflow menu.</p>
</li>
</ul>
</div>
</li>
<li>
<p>you have more options. You can find them <a href="https://developer.android.com/guide/topics/resources/menu-resource">here</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>You can copy these string definitions in  <strong>res/values/string.xml</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" id="1724055768818.1743"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ... --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"menu_rooms"</span>&gt;</span>Building rooms<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"menu_website"</span>&gt;</span>Our website<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"menu_email"</span>&gt;</span>Send us an email<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ... --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span></code><button class="btn-copy-code" onclick="copyToClipboard('1724055768818.1743')">Copy</button></pre>
</div>
</div>
</li>
<li>
<p>Add 3 menu entries with an <strong>id</strong>, a <strong>title</strong> and option <strong>showAsAction</strong> to the value <strong>never</strong></p>
<div class="videoblock">
<div class="content">
<iframe width="600" height="330" src="https://www.youtube.com/embed/AgvtSl7GNiM?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</li>
<li>
<p>We will attach this menu to activities  <strong>MainActivity</strong>, <strong>WindowActivity</strong> and <strong>WindowsActivity</strong>. To prevent the add on each activity, we will create a parent activity and each activities will inherit from this parent activity. Select package <strong>com.automacorp</strong>, right-click and select <strong>New &gt; Activity &gt; Kotlin File/Class</strong>, fill <strong>BasicActivity</strong></p>
</li>
<li>
<p>In this file you can copy this code</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1724055768819.397"><span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicActivity</span> : <span class="hljs-type">AppCompatActivity</span>()</code><button class="btn-copy-code" onclick="copyToClipboard('1724055768819.397')">Copy</button></pre>
</div>
</div>
</li>
<li>
<p>Update <strong>MainActivity</strong>, <strong>WindowActivity</strong> and <strong>WindowsActivity</strong> and replace <em>AppCompatActivity</em> by <em>BasicActivity</em></p>
</li>
<li>
<p>We will now activate the menu. Override <strong>onCreateOptionsMenu()</strong> in <strong>BasicActivity</strong>. In this method, you can inflate your menu resource in the Menu provided in the callback</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1724055768820.1052"><span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateOptionsMenu</span><span class="hljs-params">(menu: <span class="hljs-type">Menu</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">val</span> inflater: MenuInflater = menuInflater
        inflater.inflate(R.menu.main_menu, menu)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
}</code><button class="btn-copy-code" onclick="copyToClipboard('1724055768820.1052')">Copy</button></pre>
</div>
</div>
</li>
<li>
<p>When the user selects an item from the options menu (including action items in the app bar), the system calls your activity’s <strong>onOptionsItemSelected()</strong> method. This method passes the MenuItem selected. We will handle each possible values in <strong>BasicActivity</strong> class</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1724055768821.094"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onOptionsItemSelected</span><span class="hljs-params">(item: <span class="hljs-type">MenuItem</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">when</span>(item.itemId){
        R.id.menu_rooms <span class="hljs-meta">-&gt;</span> startActivity(
            Intent(<span class="hljs-keyword">this</span>, RoomsActivity::<span class="hljs-keyword">class</span>.java)
        )
        R.id.menu_website <span class="hljs-meta">-&gt;</span> startActivity(
            Intent(Intent.ACTION_VIEW, Uri.parse(<span class="hljs-string">"https://dev-mind.fr"</span>))
        )
        R.id.menu_email <span class="hljs-meta">-&gt;</span> startActivity(
            Intent(Intent.ACTION_SENDTO, Uri.parse(<span class="hljs-string">"mailto://guillaume@dev-mind.fr"</span>))
        )

    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.onContextItemSelected(item)
}</code><button class="btn-copy-code" onclick="copyToClipboard('1724055768821.094')">Copy</button></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>To understand the last code you can read the next chapter.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_intent_new_use_case">Intent : new use case</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I introduced the Intent concept in <a href="https://dev-mind.fr/training/android/android-add-activity.html#_intent_how_communicate_with_other_component">this chapter</a>. In the first menu item we call another activity in our app, as we already done in the lab <a href="https://dev-mind.fr/training/android/android-add-activity.html">"Add a new activity"</a>.</p>
</div>
<div class="paragraph">
<p>An <a href="https://developer.android.com/reference/android/content/Inten">intent</a> is an abstract description of an operation to be performed. It can be used to launch an Activity, a background Service…​ And you can call one activity in your app or in another app installed on the device. In this case you ask to the system to find the best application to resolve an action.</p>
</div>
<div class="paragraph">
<p>The first argument for the Intent is the expected action, such as <code>ACTION_VIEW</code>, <code>ACTION_SENDTO</code>, <code>ACTION_EDIT</code>, <code>ACTION_MAIN</code>, etc.
The second one is the data to operate on, such an URL, an email, expressed as a Uri.</p>
</div>
<div class="paragraph">
<p>Some examples of action/data pairs :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ACTION_VIEW</code> content://contacts/people/1 : Display information about the person whose identifier is "1".</p>
</li>
<li>
<p><code>ACTION_DIAL</code> tel:0642434445 : Display the phone dialer with the given number filled in.</p>
</li>
<li>
<p><code>ACTION_EDIT</code> content://contacts/people/1 : Edit information about the person whose identifier is "1".</p>
</li>
<li>
<p>…​</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_flask_test_your_menu"><img src="/img/ic_flask.svg" style="width: 1em"> : Test your menu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Last version of Android Studio uses Material 3 and the theme <code>Theme.Material3.DayNight.NoActionBar</code> so with no action bar by default.</p>
</div>
<div class="paragraph">
<p>So when you launch your app you have no action bar and no menu displayed on the top. Open the files <code>res/values/themes</code> (one for the default mode and one for the dark mode).</p>
</div>
<div class="paragraph">
<p>Update</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" id="1724055768822.0146"> &lt;style name="Base.Theme.Automacorp" parent="Theme.Material3.DayNight.NoActionBar"&gt;
    &lt;!-- ... --&gt;
 &lt;/style&gt;</code><button class="btn-copy-code" onclick="copyToClipboard('1724055768822.0146')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>and use</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" id="1724055768822.43"> &lt;style name="Base.Theme.Automacorp" parent="Theme.Material3.DayNight"&gt;
    &lt;!-- ... --&gt;
 &lt;/style&gt;</code><button class="btn-copy-code" onclick="copyToClipboard('1724055768822.43')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>If you launch your app you will be able to test your menu</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/menu/app-with-menu.png" alt="App with menu" width="300">
</div>
</div>
<div class="paragraph">
<p>You can personalize the bar color for that you need to override the toolbarStyle property</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" id="1724055768822.2495"> &lt;style name="Base.Theme.Automacorp" parent="Theme.Material3.DayNight"&gt;
    &lt;!-- ... --&gt;
    &lt;item name="toolbarStyle"&gt;@style/Theme.Custom.Toolbar&lt;/item&gt;
 &lt;/style&gt;
 &lt;style name="Theme.Custom.Toolbar" parent="Widget.Material3.Toolbar"&gt;
    &lt;item name="android:background"&gt;@color/primary&lt;/item&gt;
 &lt;/style&gt;</code><button class="btn-copy-code" onclick="copyToClipboard('1724055768822.2495')">Copy</button></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_flask_manage_back_button_to_return_on_main_activity"><img src="/img/ic_flask.svg" style="width: 1em"> : Manage back button to return on main activity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you are on <code>WindowActivity</code> we want to add a button to go back on <code>MainActivity</code>. To do that you need to update <code>WindowActivity</code> and add a line to activate option in action bar <code>supportActionBar?.setDisplayHomeAsUpEnabled(true)</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1724055768823.1108"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_window)
        supportActionBar?.setDisplayHomeAsUpEnabled(<span class="hljs-literal">true</span>)
        <span class="hljs-comment">//...</span>
    }
}</code><button class="btn-copy-code" onclick="copyToClipboard('1724055768823.1108')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>You also need to define your activity parent. This definition is made in AndroidManifest.xml with property <code>parentActivityName</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" id="1724055768823.0522">&lt;activity android:name=".WindowActivity" android:parentActivityName=".MainActivity"&gt;&lt;/activity&gt;</code><button class="btn-copy-code" onclick="copyToClipboard('1724055768823.0522')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Click <strong>Apply Changes</strong> <span class="image"><img src="../../img/training/android/android-studio-apply.svg" alt="Apply changes"></span>  in the toolbar to run the app and test back button. You will be able to add this feature on your other screens.</p>
</div>
</div>
</div></div></div></div></app-asciidoc-viewer><!----><app-footer _ngcontent-ng-c582792440 _nghost-ng-c2660501952 ngh="0"><footer _ngcontent-ng-c2660501952><div _ngcontent-ng-c2660501952 class="dm_footer"><div _ngcontent-ng-c2660501952 class="is-small-screen"><p _ngcontent-ng-c2660501952 id="footer-dm_society"> SARL au capital de <i _ngcontent-ng-c2660501952>5000€</i><br _ngcontent-ng-c2660501952> SIREN : 808 720 759, au RCS de Saint-Etienne<br _ngcontent-ng-c2660501952> All right reserved - ©2024 Guillaume EHRET </p></div><div _ngcontent-ng-c2660501952 class="is-large-screen"><div _ngcontent-ng-c2660501952 class="dm_footer__middle"><div _ngcontent-ng-c2660501952 class="dm_society"> Dev-Mind </div><div _ngcontent-ng-c2660501952>SARL au capital de <i _ngcontent-ng-c2660501952>5000€</i></div><div _ngcontent-ng-c2660501952>SIREN : 808 720 759, au RCS de Saint-Etienne</div><div _ngcontent-ng-c2660501952><small _ngcontent-ng-c2660501952>Mise à jour le 19/08/2024</small></div></div><div _ngcontent-ng-c2660501952 class="dm_footer__right"> All right reserved - ©2024 Guillaume EHRET </div></div></div></footer></app-footer></app-root>

<script src="polyfills-A7MJM4D4.js" type="module"></script><script src="main-3BLE4XLZ.js" type="module"></script>

<script id="ng-state" type="application/json">{"__nghData__":[{},{"t":{"7":"t0"},"c":{"7":[{"i":"t0","r":1}]}},{"c":{"1":[{"i":"c490234363","r":1}]}}]}</script></body></html>