<!DOCTYPE html><html lang="en" data-critters-container><head>
  <meta charset="utf-8">
  <title>Training</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <style>
    body {
      min-height: 100vh;
      max-height: 100vh;
      font-family: "Helvetica", "Arial", "sans-serif";
      padding: 0;
      margin: 0;
    }

    header {
      height: 90px;
      max-height: 90px;
      box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
      background-color: white;
      display: -webkit-flex;
      display: flex;
      flex-direction: column;
      box-sizing: border-box;
      z-index: 99;
      transition-duration: 0.2s;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-property: max-height, box-shadow;
      position: fixed;
      width: 100%;
      text-align: center;
    }
    header hr {
      width:100%;
      background-color: #424242;
      border-color: #424242;
      display: block;
      border: 0;
      height: 0.5em;
      margin: 0;
    }
    .header-img {
      margin: auto;
      width: 50%;
      padding-top: 0.5em;
      height: 30px;
    }
    .header-img img {
      max-height: 30px !important;
    }
    .header-space {
      min-height: 90px;
    }


    @media screen and (min-width: 901px) {
      header {
        height: 120px;
        max-height: 120px;
      }
      .header-img {
        height: 60px;
      }
      .header-img img {
        max-height: 60px !important;
      }
      .header-space {
        min-height: 120px;
      }
      nav a {
        padding: 6px 24px;
      }
      .nav-home{
        display: block !important;
      }
    }


    nav {
      display: -webkit-flex;
      display: flex;
      margin: auto;
    }

    nav a {
      padding: 0 12px;
      line-height: 28px;
      height: 28px;
      color: #424242;
      margin: auto;
      text-decoration: none;
      text-transform: uppercase;
      font-weight: 600;
      font-size: 13px;
      border-radius: 4px;
    }
    .nav-home{
      display: none;
    }
    nav a > img {
    // height: 20px;
    }

    nav a:hover {
      background-color: #9e9e9e;
    }

    nav .active {
      background-color: rgba(0, 0, 0, 0.14);
    }

    main {
      overflow-x: hidden;
    }

    img, picture {
      max-width: 100%;
      height: auto;
      margin: auto;
    }

    * {
      box-sizing: border-box; /* pour maîtriser width et flex-basis */
    }

    .devmind-section {
      display: block;
      margin: 0 auto;
      max-width: 1600px;
      padding: 60px 40px;
    }

    @media (max-width: 700px) {
      .devmind-section {
        padding: 25px 10px;
      }
    }

    @media (min-width: 701px) and (max-width: 900px) {
      .devmind-section {
        padding: 40px 25px;
      }
    }

    .dm-social {
      min-width: 2em;
      max-width: 2em;
      width: 2em;
      height: 2em;
    }
  </style>
  <script>
    function copyToClipboard(id) {
      const text = document.getElementById(id).innerText
        .replaceAll('~$', '')
        .replaceAll('(1)', '')
        .replaceAll('(2)', '')
        .replaceAll('(3)', '')
        .replaceAll('(4)', '')
        .replaceAll('(5)', '')
        .replaceAll('(6)', '')
        .replaceAll('(7)', '')
        .replaceAll('(8)', '')
        .replaceAll('(9)', '')
        .replaceAll('(10)', '')
      ;
      navigator.clipboard.writeText(text.substring(0, text.length));
    }
  </script>
<style>code[class*=language-]{color:#555;background:none;text-shadow:0 1px white;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}.imageblock{text-align:center}.toc{background:#f0f8ff;padding:1em}h1,h2{font-weight:100}h1{font-size:35px;line-height:38px}.dm-block--blog{width:100%;background-color:#eceff1;color:#424242;padding:0;margin:0}.dm-block--blog a,.dm-block--blog a:hover,.dm-block--blog a:visited{font-weight:700;color:#424242;text-decoration:none;cursor:pointer}.dm-block--blog a:hover{color:#424242;text-decoration:underline}.dm-block--blog .link{display:block}.btn-copy-code{background-color:#fff;border:2px solid white;border-radius:24px;color:#424242!important;margin:1em .5em auto auto;font-weight:700;font-size:16px;display:block;cursor:pointer;width:auto;text-align:center;box-shadow:0 4px 5px #00000024,0 1px 10px #0000001f,0 2px 4px -1px #0003;padding:4px;font-size:small}.btn-copy-code:hover{background-color:#424242;border:2px solid #424242;color:#fff!important;padding:.5em 1em}.text-center{text-align:center}footer{background-color:#424242}.is-small-screen{display:none}.is-large-screen{display:inherit}@media screen and (max-width: 900px){.is-small-screen{display:inherit}.is-large-screen{display:none}}h1,h2{color:#424242;font-weight:100}h1{font-weight:bolder;font-size:35px;line-height:38px}h2{font-size:25px;line-height:28px}@media (max-width: 700px){h1{font-size:28px;line-height:30px}h2{font-size:22px;line-height:24px}}
</style><link rel="stylesheet" href="styles-2TVDB7GC.css" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-2TVDB7GC.css"></noscript><style ng-app-id="ng">.dm_footer[_ngcontent-ng-c2660501952]{color:#eee;display:flex;justify-content:space-between;font-size:14px}.dm_footer[_ngcontent-ng-c2660501952]   .dm_society[_ngcontent-ng-c2660501952]{color:#fff}.dm_footer[_ngcontent-ng-c2660501952]   div[_ngcontent-ng-c2660501952]{margin-right:1em;width:100%}.dm_footer[_ngcontent-ng-c2660501952]   .dm_footer__middle[_ngcontent-ng-c2660501952]{flex-grow:1}.dm_footer[_ngcontent-ng-c2660501952]   .dm_footer__right[_ngcontent-ng-c2660501952]{text-align:right}.dm_footer[_ngcontent-ng-c2660501952]   .is-large-screen[_ngcontent-ng-c2660501952]{padding:.7em;margin:.7em 1em}.dm_footer[_ngcontent-ng-c2660501952]   .is-small-screen[_ngcontent-ng-c2660501952]{padding:0;margin:0 1em;font-size:12px}</style><style ng-app-id="ng">h1{margin-top:.5em}.dm-blog--info-date{font-size:smaller;color:#424242;border:1px solid #aaa;border-radius:24px;padding:.5em 1em;margin-right:.5em;display:inline}.blog-keywords{display:flex;margin-bottom:1em}.blog-keywords .dm-blog--keyword-detail{background-color:#ccc;color:#424242;padding:.5em 1em;margin-right:.5em;border-radius:24px;font-size:smaller}.toc{background-color:#ccc;margin-top:1em;border:1px solid #ccc;padding:1em;border-radius:8px}.toc #toctitle{font-weight:700;margin-bottom:.5em}img{max-width:100%;height:auto}.imageblock>.content{display:flex;justify-content:center;align-items:center}.highlight{display:block;overflow-x:auto;background:#f3f3f3;color:#444;padding:1.5em;box-shadow:0 8px 16px #00000026;border-radius:8px}code.hljs{padding:3px 5px}.hljs-comment{color:#697070}.hljs-punctuation,.hljs-tag{color:#444a}.hljs-tag .hljs-attr,.hljs-tag .hljs-name{color:#444}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-name,.hljs-selector-tag{font-weight:700}.hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#800}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-link,.hljs-operator,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#ab5656}.hljs-literal{color:#695}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code{color:#397300}.hljs-meta{color:#1f7199}.hljs-meta .hljs-string{color:#38a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.language-kotlin:before{display:block;float:right;content:"kotlin";font-weight:700;text-transform:uppercase}.language-typescript:before{display:block;float:right;content:"typescript";font-weight:700;text-transform:uppercase}.language-java:before{display:block;float:right;content:"java";font-weight:700;text-transform:uppercase}.language-javascript:before{display:block;float:right;content:"javascript";font-weight:700;text-transform:uppercase}.language-shell:before{display:block;float:right;content:"shell";font-weight:700;text-transform:uppercase}.language-yaml:before{display:block;float:right;content:"yaml";font-weight:700;text-transform:uppercase}.language-json:before{display:block;float:right;content:"json";font-weight:700;text-transform:uppercase}.language-xml:before{display:block;float:right;content:"xml";font-weight:700;text-transform:uppercase}.language-html:before{display:block;float:right;content:"html";font-weight:700;text-transform:uppercase}.language-css:before{display:block;float:right;content:"css";font-weight:700;text-transform:uppercase}.language-scss:before{display:block;float:right;content:"scss";font-weight:700;text-transform:uppercase}
</style></head>
<body><!--nghm-->
  <app-root _nghost-ng-c582792440 ng-version="18.0.0" ngh="2" ng-server-context="ssg"><app-header _ngcontent-ng-c582792440 _nghost-ng-c2882497807 ngh="0"><header _ngcontent-ng-c2882497807><div _ngcontent-ng-c2882497807 class="header-img"><a _ngcontent-ng-c2882497807 routerlink="/" aria-label="Accueil" href="/"><img _ngcontent-ng-c2882497807 src="img/logo/logo_long.svg" alt="Dev-Mind" title="Dev-Mind"></a></div><nav _ngcontent-ng-c2882497807><a _ngcontent-ng-c2882497807 routerlink="/" aria-label="Accueil" class="nav-home" href="/"><img _ngcontent-ng-c2882497807 src="/img/ic_home_white_24px.svg" rel="start" alt="Accueil"></a><a _ngcontent-ng-c2882497807 routerlink="/formations.html" aria-label="Formations" class="active" href="/formations.html"> Formations</a><a _ngcontent-ng-c2882497807 routerlink="/blog.html" aria-label="Blog" class href="/blog.html">Blog</a><a _ngcontent-ng-c2882497807 routerlink="/experience.html" aria-label="Experience" class href="/experience.html"> Expérience</a></nav><hr _ngcontent-ng-c2882497807></header><div _ngcontent-ng-c2882497807 class="header-space"></div></app-header><router-outlet _ngcontent-ng-c582792440></router-outlet><app-asciidoc-viewer ngh="1"><div class="dm-block--blog"><div class="devmind-section"><h1><!--ngetn--></h1><div class="blog-keywords"><div class="dm-blog--info-date">19/08/2024</div><div class="dm-blog--keyword-detail">Android</div><!---->&nbsp; </div><div class="preview"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a class="link" fragment="#_android_studio">Android studio</a>
<ul class="sectlevel2">
<li><a class="link" fragment="#_installation">Installation</a></li>
<li><a class="link" fragment="#_update_android_studio">Update Android Studio</a></li>
<li><a class="link" fragment="#_update_android_sdk">Update Android SDK</a></li>
</ul>
</li>
<li><a class="link" fragment="#_fundamental_concepts">Fundamental concepts</a></li>
<li><a class="link" fragment="#_flask_a_first_example_with_jetpack_compose"><img src="/img/ic_flask.svg" style="width: 1em"> : A first example with Jetpack compose</a></li>
<li><a class="link" fragment="#_most_important_files">Most important files</a>
<ul class="sectlevel2">
<li><a class="link" fragment="#_manifest_file">Manifest file</a></li>
<li><a class="link" fragment="#_activity">Activity</a></li>
<li><a class="link" fragment="#_resource_files">Resource files</a></li>
<li><a class="link" fragment="#_gradle_file">Gradle file</a></li>
</ul>
</li>
<li><a class="link" fragment="#_flask_launch_your_application"><img src="/img/ic_flask.svg" style="width: 1em"> : Launch your application</a>
<ul class="sectlevel2">
<li><a class="link" fragment="#_configure_a_real_android_device">Configure a real Android device</a></li>
<li><a class="link" fragment="#_configure_a_virtual_device">Configure a virtual device</a></li>
<li><a class="link" fragment="#_run_your_app">Run your app</a></li>
</ul>
</li>
<li><a class="link" fragment="#_resources">Resources</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The aim of this course is to learn you, how write a simple application for Android and how to run it on your phone.
To do that, we will develop with Kotlin language.
If you know Java, everything will be easier with Kotlin.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/android-course1.png" alt="Android course step1" width="800">
</div>
</div>
<div class="paragraph">
<p>We have a limited number of lesson hours. We will therefore quickly go over some concepts.
If you want to go deeper, you will find more informations on <a href="https://developer.android.com/" class="bare">https://developer.android.com/</a></p>
</div>
<div class="paragraph">
<p>The aim is to be able to develop a simple application to call a REST API developed in Java (Spring) to display building rooms and manage windows in these rooms. It is necessary to ventilate as much as possible rooms, but as winter approaches it will become important to heat the buildings to ensure user comfort. Windows should be open during and after classes, closed at night or in case of heavy rain or severe cold.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_android_studio">Android studio</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Android studio is the tool we use to write Android code.
You need to install it on your computer (installation requires 900MB) on <a href="https://developer.android.com/studio" class="bare">https://developer.android.com/studio</a>.</p>
</div>
<div class="sect2">
<h3 id="_installation">Installation</h3>
<div class="paragraph">
<p>For a Linux installation you have to go in the installation directory (for me ~/appli) with a terminal and launch script <code>launch.sh</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" id="1731601746499.8184">cd ~/appli/android-studio/bin
sh ./studio.sh</code><button class="btn-copy-code" onclick="copyToClipboard('1731601746499.8184')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>Follow the wizard and choose a standard installation.
It’s important to do that to download the last version of Android SDK, recent images for Emulator…​</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android-studio.png" alt="Follow wizard" width="700">
</div>
</div>
<div class="paragraph">
<p>After the installation, you should have this screen</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android-studio1.png" alt="Follow wizard" width="700">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_update_android_studio">Update Android Studio</h3>
<div class="paragraph">
<p>It’s always better to use the last version of Android Studio. To update it, you can go in the menu <strong>Help &gt; Check for updates</strong>.</p>
</div>
<div class="paragraph">
<p>If a version is available, you can download it and install it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_update_android_sdk">Update Android SDK</h3>
<div class="paragraph">
<p>If you already have a version of Android Studio on your laptop, you should update Android Sdk.
For that go on menu <strong>Tools &gt; SDK manager</strong></p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android-studio-update1.png" alt="Menu SDK manager" width="800">
</div>
</div>
<div class="paragraph">
<p>Below on my example, I choose to install the last version of the SDK, keep the version 14 and remove Android 13</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android-studio-update2.png" alt="Choose SDK versions" width="800">
</div>
</div>
<div class="paragraph">
<p>When you develop in Android you should always do it on the last SDK version. Google requires you to always target this latest version when you publish apps to the official store. In our case we have to target the VanillaCream version (API level 35)</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fundamental_concepts">Fundamental concepts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Android apps are built as a combination of components that can be invoked individually.
We have several kind of components</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Activity</strong> : an activity is the entry point for interacting with the user.
It represents a single screen with a user interface</p>
</li>
<li>
<p><strong>Service</strong> : a service is an entry point for keeping an app running in the background (app data synchronization, media player…​)</p>
</li>
<li>
<p><strong>Broadcast provider</strong> : A broadcast receiver is a component that enables the system to deliver events to the app (low battery, screen rotation, dark mode…​).</p>
</li>
<li>
<p><strong>Content provider</strong> : A content provider manages a shared set of app data that you can store in the file system, in a SQLite database, on the web, or on any other persistent storage location that your app can access.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this course we will only manipulate activities.</p>
</div>
<div class="paragraph">
<p>After you will finish your first app, you can learn more about the other app components on the <a href="https://developer.android.com/guide/components/fundamentals">Google developper website</a>.</p>
</div>
<div class="paragraph">
<p>Let’s focus on activities.</p>
</div>
<div class="paragraph">
<p>When you click on your app’s icon on your phone, you will launch the "main" activity.
This activity is often your home activity from which you will launch other activities.</p>
</div>
<div class="paragraph">
<p>An activity interact with an XML resource file where your view content is defined.
Android allows you to provide different resources for different devices.
For example, you can create different layouts for different screen sizes.
The system determines which layout to use based on the screen size of the current device.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android-activities.png" alt="A view is an activity and an XML file" width="800">
</div>
</div>
<div class="paragraph">
<p>Note that there is also another important concept in Android development with the <a href="https://developer.android.com/guide/fragments?hl=en">fragments</a>. A Fragment represents a reusable portion of your app’s UI. A fragment defines and manages its own layout, has its own lifecycle, and can handle its own input events. Fragments can’t live on their own. They must be hosted by an activity.</p>
</div>
<div class="paragraph">
<p>Another remark, today you can always write your screen interface in an XML file. But you can also do this job in Kotlin with the Jetpack Compose library. This library is a modern toolkit for building native Android UI. It simplifies and accelerates UI development on Android.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/jetpack-compose.svg" alt="Jetpacj compose" width="60">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_flask_a_first_example_with_jetpack_compose"><img src="/img/ic_flask.svg" style="width: 1em"> : A first example with Jetpack compose</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lab, you will learn how create a new Android project with Android Studio</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Launch Android Studio. If you need to install it see you on the <a href="http://localhost:8080/training/android/android-first-app.html#_android_studio">first chapter</a></p>
</li>
<li>
<p>In the Welcome to Android Studio window, click Start a new Android Studio project. If you have a project already opened, select <strong>File &gt; New &gt; New Project.</strong></p>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android-studio1.png" alt="Follow wizard" width="700">
</div>
</div>
</li>
<li>
<p>Android Studio will initialize a new project with an activity.
It asks you to select a template for this activity.
In the <strong>Select a Project Template window</strong>, select <strong>Empty Activity</strong> (in JetPack compose) and click Next.</p>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android-studio2.png" alt="Select project type" width="700">
</div>
</div>
</li>
<li>
<p>In the next wizard window, you have to define the app name and the language</p>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android-studio-new.png" alt="New project" width="700">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Enter <em>automacorp</em> in the <strong>Name</strong> field.</p>
</li>
<li>
<p>Enter <em>com.automacorp </em>in the <strong>Package name</strong> field.</p>
</li>
<li>
<p>If you’d like to place the project in a different folder, change its <strong>Save location</strong>.</p>
</li>
<li>
<p>Select <em>Kotlin</em> from the <strong>Language</strong> drop-down menu.</p>
</li>
<li>
<p>Select the lowest version of Android your app will support in the Minimum SDK field.
A message indicates you on how many device your app will be available.
If you want to target more devices you can select a lower API version.
If you want to use last Android features you can select higher version.
You can click on <strong>Help me choose</strong> link to select the good API version</p>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android-versions.png" alt="API versions" width="700">
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click on <strong>Finish</strong> button.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After some processing time for code generation, the project appears in Android Studio.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android-studio3.png" alt="Follow wizard" width="1000">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_most_important_files">Most important files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now take a moment to review the most important files.
<a href="https://developer.android.com/studio">Android Studio</a> is organized like <a href="https://www.jetbrains.com/idea/">IntelliJ</a>, used during labs about Spring Framework. The core of these software are common and made by <a href="https://www.jetbrains.com/">Jetbrains</a>.</p>
</div>
<div class="paragraph">
<p>First, be sure the Project window is open (select <strong>View &gt; Tool Windows &gt; Project</strong>) and the Android view is selected from the drop-down list at the top of that window.
This Android view let see you the main files of your Android project</p>
</div>
<div class="sect2">
<h3 id="_manifest_file">Manifest file</h3>
<div class="paragraph">
<p><strong>File :</strong> <strong><em>app &gt; manifests &gt; AndroidManifest.xml</em></strong></p>
</div>
<div class="paragraph">
<p>Manifest file is a kind of project id card.</p>
</div>
<div class="paragraph">
<p>The manifest file describes essential information about your app to the Android build tools, the Android operating system, and Google Play.</p>
</div>
<div class="paragraph">
<p>All activities must be defined inside and one of them will be defined as entry point for your app (with an intent filter).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" id="1731601746501.0977"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">manifest</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span> <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">"http://schemas.android.com/tools"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">application</span> <span class="hljs-attr">android:allowbackup</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">android:dataextractionrules</span>=<span class="hljs-string">"@xml/data_extraction_rules"</span> <span class="hljs-attr">android:fullbackupcontent</span>=<span class="hljs-string">"@xml/backup_rules"</span> <span class="hljs-attr">android:icon</span>=<span class="hljs-string">"@mipmap/ic_launcher"</span> <span class="hljs-attr">android:label</span>=<span class="hljs-string">"@string/app_name"</span> <span class="hljs-attr">android:roundicon</span>=<span class="hljs-string">"@mipmap/ic_launcher_round"</span> <span class="hljs-attr">android:supportsrtl</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">android:theme</span>=<span class="hljs-string">"@style/Theme.Automacorp"</span> <span class="hljs-attr">tools:targetapi</span>=<span class="hljs-string">"31"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activity</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">".MainActivity"</span> <span class="hljs-attr">android:exported</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">android:label</span>=<span class="hljs-string">"@string/app_name"</span> <span class="hljs-attr">android:theme</span>=<span class="hljs-string">"@style/Theme.Automacorp"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.action.MAIN"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">action</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.LAUNCHER"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">category</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span></code><button class="btn-copy-code" onclick="copyToClipboard('1731601746501.0977')">Copy</button></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_activity">Activity</h3>
<div class="paragraph">
<p>You can see 3 packages <code>com.automacorp</code> in Android view.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first one (not suffixed) contains all your Kotlin files used to write your app and our first activity</p>
</li>
<li>
<p>The second (suffixed with androidTest) contains test files executed to test your app on a device or on an emulator.</p>
</li>
<li>
<p>The last one (suffixed with test) contains unit test files used to control your code locally at each build</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unfortunately we don’t have enough time to see how to write these tests during our labs.</p>
</div>
<div class="paragraph">
<p>But be aware that if you want to create a sustainable application, testing is the best way to limit regressions and make it easier to manage your application over time.</p>
</div>
<div class="paragraph">
<p>You can find more information about tests <a href="https://developer.android.com/training/testinghere">here</a>.</p>
</div>
<div class="paragraph">
<p><strong>File :</strong> <strong><em>app &gt; java &gt; com.automacorp &gt; MainActivity</em></strong></p>
</div>
<div class="sect3">
<h4 id="_the_code_to_create_an_activity">The code to create an activity</h4>
<div class="paragraph">
<p>This is the main activity and it’s the entry point for your app.</p>
</div>
<div class="paragraph">
<p>When you build and run your app, the system launches an instance of this Activity and loads its layout.</p>
</div>
<div class="paragraph">
<p>Each activity (as each components in Android) has a lifecyle and you can interact at each step (ie you can overload a method to add a behavior or some code in a lifecycle phase).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/firstapp/android-activity-lifecycle.png" alt="Activity lifecyle">
</div>
</div>
<div class="paragraph">
<p>For example in <code>MainActivity</code>, the view is associated in the <code>onCreate</code> function. In this example the work is done in the <code>setContent</code> block. This block is used to declare which Jetpack Compose components will be used to create the view. We load a custom type (ie <code>AutomacorpTheme</code>) and a <code>Scaffold</code> component. The <code>Scaffold</code> component is a layout component that provides a material design layout structure for the screen.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731601746504.2405"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
            AutomacorpTheme {
                Scaffold(modifier = Modifier.fillMaxSize()) { innerPadding -&gt;
                    Greeting(
                        name = <span class="hljs-string">"Android"</span>,
                        modifier = Modifier.padding(innerPadding)
                    )
                }
            }
        }
    }
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731601746504.2405')">Copy</button></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jetpack_component">Jetpack component</h4>
<div class="paragraph">
<p><code>Greeting</code> is a composable function. A function composable has the <code>@Composable</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731601746504.428"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Greeting</span><span class="hljs-params">(name: <span class="hljs-type">String</span>, modifier: <span class="hljs-type">Modifier</span> = Modifier)</span></span> {
    Text(text = <span class="hljs-string">"Hello $name!"</span>, modifier = modifier)
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731601746504.428')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>A few noteworthy things about this function:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The function is annotated with the @Composable annotation. All Composable functions must have this annotation; this annotation informs the Compose compiler that this function is intended to convert data into UI.</p>
</li>
<li>
<p>The function takes in data. Composable functions can accept parameters, which allow the app logic to describe the UI. In this case, our widget accepts a String so it can greet the user by name.</p>
</li>
<li>
<p>The function displays text in the UI. It does so by calling the Text() composable function, which actually creates the text UI element. Composable functions emit UI hierarchy by calling other composable functions.</p>
</li>
<li>
<p>The function doesn’t return anything. Compose functions that emit UI do not need to return anything, because they describe the desired screen state instead of constructing UI widgets.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This function is fast, idempotent, and free of side-effects. The function describes the UI without any side-effects, such as modifying properties or global variables.</p>
</div>
</div>
<div class="sect3">
<h4 id="_preview_the_component">Preview the component</h4>
<div class="paragraph">
<p>To test your app, you can run it on your phone or on an emulator. We will see that in the next chapter.</p>
</div>
<div class="paragraph">
<p>But you can write a simple function to be able to test a composable alone. The @Preview annotation lets you preview your composable functions within Android Studio without having to build and install the app to an Android device or emulator. The annotation must be used on a composable function that does not take in parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731601746505.1929"><span class="hljs-meta">@Preview(showBackground = true)</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">GreetingPreview</span><span class="hljs-params">()</span></span> {
    AutomacorpTheme {
        Greeting(<span class="hljs-string">"Android"</span>)
    }
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731601746505.1929')">Copy</button></pre>
</div>
</div>
<div class="paragraph">
<p>You can choose to display the design view at the right of your code editor with the button at the top right of the editor.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/firstapp/compoasable_preview.png" alt="Composable preview" width="800">
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../img/training/android/firstapp/composable_view_code.png" alt="Code" width="30"></span> Code View
<span class="image"><img src="../../img/training/android/firstapp/composable_view_code_design.png" alt="Code and design" width="30"></span> Code And Design View
<span class="image"><img src="../../img/training/android/firstapp/composable_view_design.png" alt="Design" width="30"></span> Design View</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resource_files">Resource files</h3>
<div class="paragraph">
<p>Resources are the additional files and static content that your code uses, such as images, screen definitions, strings used in interfaces, styles, animation instructions, and more.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android-resource1.png" alt="Android resource" width="800">
</div>
</div>
<div class="paragraph">
<p>You can provide alternative resources for specific device configurations, by grouping them in specially-named resource directories.</p>
</div>
<div class="paragraph">
<p>At runtime, Android uses the appropriate resource based on the current configuration.</p>
</div>
<div class="paragraph">
<p>For example, you might want to provide a different UI layout depending on the screen size or different strings depending on user language. In this case you will have a default file <code>app/src/main/res/values/string.xml</code> and a specific file for France <code>app/src/main/res/values-fr/string.xml</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_gradle_file">Gradle file</h3>
<div class="paragraph">
<p><strong>File :</strong> <strong><em>Gradle Scripts &gt; build.gradle.kts</em></strong></p>
</div>
<div class="paragraph">
<p>There are two files with this name:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>one for the project, <strong>Project: automacorp</strong>, and</p>
</li>
<li>
<p>one for the app module, <strong>Module: app</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each module has its own <strong>build.gradle.kts</strong> file, but this first project currently has just one module.</p>
</div>
<div class="paragraph">
<p>If you need to use external libraries you can, and you need to declare them in <strong>build.gradle.kts (Module: app)</strong>.</p>
</div>
<div class="paragraph">
<p>You can also configure the <code>android</code> plugin (APi version, SDK version).The <code>defaultConfig</code> block is important. This is where you have to define</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the min sdk used by the phone that uses your app</p>
</li>
<li>
<p>the target sdk used for the compilation. It’s important to use the highest value</p>
</li>
<li>
<p>your code version and the version name. If you need to publish your app on the Google store this number must be incremented at each release.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" id="1731601746506.278">android {
    namespace = <span class="hljs-string">"com.automacorp"</span>
    compileSdk = <span class="hljs-number">34</span>

    defaultConfig {
        applicationId = <span class="hljs-string">"com.automacorp"</span>
        minSdk = <span class="hljs-number">31</span>
        targetSdk = <span class="hljs-number">34</span>
        versionCode = <span class="hljs-number">1</span>
        versionName = <span class="hljs-string">"1.0"</span>

        testInstrumentationRunner = <span class="hljs-string">"androidx.test.runner.AndroidJUnitRunner"</span>
        vectorDrawables {
            useSupportLibrary = <span class="hljs-literal">true</span>
        }
    }

    buildTypes {
        release {
            isMinifyEnabled = <span class="hljs-literal">false</span>
            proguardFiles(
                getDefaultProguardFile(<span class="hljs-string">"proguard-android-optimize.txt"</span>),
                <span class="hljs-string">"proguard-rules.pro"</span>
            )
        }
    }
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_1_8
        targetCompatibility = JavaVersion.VERSION_1_8
    }
    kotlinOptions {
        jvmTarget = <span class="hljs-string">"1.8"</span>
    }
    buildFeatures {
        compose = <span class="hljs-literal">true</span>
    }
    composeOptions {
        kotlinCompilerExtensionVersion = <span class="hljs-string">"1.5.1"</span>
    }
    packaging {
        resources {
            excludes += <span class="hljs-string">"/META-INF/{AL2.0,LGPL2.1}"</span>
        }
    }
}</code><button class="btn-copy-code" onclick="copyToClipboard('1731601746506.278')">Copy</button></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_flask_launch_your_application"><img src="/img/ic_flask.svg" style="width: 1em"> : Launch your application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this part you will be able to launch your application on you phone or tablet. If you don’t have a device on Android operating system, you can use the emulator embedded in Android Studio.</p>
</div>
<div class="sect2">
<h3 id="_configure_a_real_android_device">Configure a real Android device</h3>
<div class="paragraph">
<p>You need to set up your phone</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect your device to your development machine with a USB cable. If you developed on Windows, you might need to install <a href="https://developer.android.com/studio/run/oem-usb">USB driver</a> for your device.</p>
</li>
<li>
<p>You need to update your device to activate "Developer options"</p>
<div class="ulist">
<ul>
<li>
<p>Open the <strong>Settings app</strong> on your device</p>
</li>
<li>
<p>Select item <strong>About phone</strong>.</p>
</li>
<li>
<p>Go to the bottom to <strong>Build number</strong> item</p>
</li>
<li>
<p>Tap on this <strong>Build number</strong> seven times. You should see a message which says that you are now a developer.</p>
</li>
<li>
<p>If you go back on <strong>Settings app</strong> and in <strong>System</strong> section you should see a new entry <strong>Developer options</strong></p>
</li>
<li>
<p>Tap on <strong>Developer options</strong> and scroll down to find and <strong>enable USB debugging</strong>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Since few versions of Android, you can also pair your phone via your Wifi connection. Your laptop and your phone must use the same Wifi.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On Android Studio, open the running devices window (with the button on the right of the UI).</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/firstapp/android_pair_wifi1.png" alt="Pair devices using Wifi" width="800">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select in the toolbar the button <strong>Pair devices using Wifi</strong> <span class="image"><img src="../../img/training/android/firstapp/android_pair_wifi_button.png" alt="Pair devices using Wifi" width="30"></span></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/firstapp/android_pair_wifi3.png" alt="Pair devices using Wifi" width="500">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>On your phone, in <strong>Developer options</strong>,  select <strong>Wireless debugging</strong> and <strong>Pair using QR code</strong> and scan the QR code. If everything is OK you should see. <strong>To work you should set the same Wifi on your laptop and on your mobile</strong>.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/firstapp/adb_wifi-wireless_debugging.png" alt="Pair devices using Wifi" width="300">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>When you are connected you should see your device in the running devices window</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/firstapp/android_pair_wifi2.png" alt="Pair devices using Wifi" width="500">
</div>
</div>
<div class="paragraph">
<p>Now you are ready to run your app</p>
</div>
</div>
<div class="sect2">
<h3 id="_configure_a_virtual_device">Configure a virtual device</h3>
<div class="paragraph">
<p>When you install Android Studio the first time, an AVD (Android Virtual Device) is also installed to simulate a phone. A virtual device is a configuration that defines the characteristics of an Android phone, tablet, Wear OS, Android TV, or Automotive OS device. It’s very useful to test an app for every kind of device.</p>
</div>
<div class="paragraph">
<p>You can add, update or delete your virtual devices on the AVD. Open menu  <strong>Select Tools &gt; Device Manager.</strong>. You can also access this window through a side tab.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/firstapp/android_pair_wifi1.png" alt="Pair devices using Wifi" width="800">
</div>
</div>
<div class="paragraph">
<p>If you click on the + button, at the top of the AVD Manager dialog you will be able to create a device. You can choose device type (TV, phone, auto…​), its configuration (OS version, density, size…​)
The Select Hardware page appears.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/firstapp/android_device_manager2.png" alt="Create virtual device manager" width="700">
</div>
</div>
<div class="paragraph">
<p>For more informations you can read <a href="https://developer.android.com/studio/run/managing-avds#createavd">this article</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_run_your_app">Run your app</h3>
<div class="paragraph">
<p>Everything is now ready to test your project.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In toolbar, select your app from the run/debug configurations drop-down menu.</p>
</li>
<li>
<p>From the target device drop-down menu, select the AVD or the device, that you want to run your app on.</p>
</li>
<li>
<p>Click on Run button</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/firstapp/android-run.png" alt="Run application" width="500">
</div>
</div>
<div class="paragraph">
<p>If everything is OK you should see your first app. It is very simple and not very pretty but we do better in the next chapter</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../img/training/android/firstapp/android_emulator.png" alt="Hello world application" width="400">
</div>
</div>
<div class="paragraph">
<p>To analyze errors you can open the Logcat view to see logs send by your device or the emulated device</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../img/training/android/firstapp/android_error.png" alt="Logcat view">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>About Android you can read</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://developer.android.com/">Android developer website</a> : you will find all resources about Android.</p>
</li>
<li>
<p><a href="https://developer.android.com/courses/kotlin-android-fundamentals/toc">Codelabs</a> : you can find more detailed examples in these codelabs created by Google training team</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find resources on Kotlin</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://dev-mind.fr/blog/2019/kotlin_et_android.html">Kotlin and android</a> : my blog post is in French but it explains why Google prefers today Kotlin to Java</p>
</li>
<li>
<p><a href="https://play.kotlinlang.org/byExample/overview">Learn Kotlin by examples</a> : you can read documentation and test your code online</p>
</li>
<li>
<p><a href="https://kotlinlang.org/">Official website</a> documentation about this language</p>
</li>
<li>
<p><a href="https://developer.android.com/kotlin">Google developpers site for kotlin</a>: several resources on how use Kotlin to create an Android application</p>
</li>
</ul>
</div>
</div>
</div></div></div></div></app-asciidoc-viewer><!----><app-footer _ngcontent-ng-c582792440 _nghost-ng-c2660501952 ngh="0"><footer _ngcontent-ng-c2660501952><div _ngcontent-ng-c2660501952 class="dm_footer"><div _ngcontent-ng-c2660501952 class="is-small-screen"><p _ngcontent-ng-c2660501952 id="footer-dm_society"> SARL au capital de <i _ngcontent-ng-c2660501952>5000€</i><br _ngcontent-ng-c2660501952> SIREN : 808 720 759, au RCS de Saint-Etienne<br _ngcontent-ng-c2660501952> All right reserved - ©2024 Guillaume EHRET </p></div><div _ngcontent-ng-c2660501952 class="is-large-screen"><div _ngcontent-ng-c2660501952 class="dm_footer__middle"><div _ngcontent-ng-c2660501952 class="dm_society"> Dev-Mind </div><div _ngcontent-ng-c2660501952>SARL au capital de <i _ngcontent-ng-c2660501952>5000€</i></div><div _ngcontent-ng-c2660501952>SIREN : 808 720 759, au RCS de Saint-Etienne</div><div _ngcontent-ng-c2660501952><small _ngcontent-ng-c2660501952>Mise à jour le 14/11/2024</small></div></div><div _ngcontent-ng-c2660501952 class="dm_footer__right"> All right reserved - ©2024 Guillaume EHRET </div></div></div></footer></app-footer></app-root>

<script src="polyfills-A7MJM4D4.js" type="module"></script><script src="main-ZP2R6S5W.js" type="module"></script>

<script id="ng-state" type="application/json">{"__nghData__":[{},{"t":{"7":"t6"},"c":{"7":[{"i":"t6","r":1}]}},{"c":{"1":[{"i":"c490234363","r":1}]}}]}</script></body></html>